# Day 13 | è·¨åœ˜éšŠå”ä½œè¨­è¨ˆï¼šæŠ€è¡“æ–‡ä»¶ã€OpenAPIã€å…±ç”¨å¥‘ç´„ : API æ–‡æª”åŒ–èˆ‡åœ˜éšŠå”ä½œæ¨™æº–å»ºç«‹

é¦–å…ˆï¼Œå…ˆè®“æˆ‘å€‘ä¸€åŒæ­å–œ æˆ‘å€‘çµ‚æ–¼èµ°éäº†æ¼«æ¼«å„ç¨®éœ€æ±‚èˆ‡æŠ€è¡“çš„è¨è«–( a.k.a æ··å’Œé›™æ‰“) çµ‚æ–¼ä¾†åˆ°äº†å¯¦ä½œäº†ã€‚

```python

ç”¢å“ç™¼æƒ³èˆ‡æ©Ÿæœƒæ¢ç´¢=>éœ€æ±‚å®šç¾©èˆ‡å„ªå…ˆæ’åº=>ç”¢å“è¨­è¨ˆèˆ‡ä½¿ç”¨è€…é«”é©—=>æŠ€è¡“è¦åŠƒèˆ‡ç³»çµ±è¨­è¨ˆ=>(current)è»Ÿé«”é–‹ç™¼èˆ‡æŒçºŒæ•´åˆ=>...

```

ä»Šå¤©çš„å…§å®¹æœƒæ¯”è¼ƒåä¸åŒåœ˜éšŠé–“çš„åˆä½œä¾æ“šèˆ‡åª’ä»‹æ–‡ä»¶ï¼Œé€™æ˜¯ä¸€å€‹éå¸¸é‡è¦çš„è­°é¡Œã€‚æˆ‘ä¸ç¢ºå®šæ˜¯ä¸æ˜¯æ¯å€‹äººéƒ½æœ‰ç©éä¸€å€‹éŠæˆ²å«åšã€Œå‚³è²è©±ç­’ã€ï¼Œä½†ç°¡å–®ä¾†èªªå°±æ˜¯ç”±ä¸€å€‹èµ·é»åœ¨æ”¶åˆ°è¨Šæ¯ä¹‹å¾Œä¸æ–·çš„ç¶“ç”±ä¸‹ä¸€å€‹äººå°‡ä¸€é–‹å§‹çš„æ¦‚å¿µå‘ä¸‹å‚³éä¸‹å»ç›´è‡³çµ‚é»çš„éŠæˆ²ï¼Œçµ‚é»å¿…é ˆè¦çŒœå‡ºä¸€é–‹å§‹çš„è¨Šæ¯æ˜¯ä»€éº¼ã€‚ä½œç‚ºä¸€å€‹å­©å­æˆ–æ˜¯å­¸ç”Ÿé€™æ˜¯ä¸€å€‹éå¸¸å¥½ç©çš„éŠæˆ²ï¼Œå¯ä»¥çœ‹åˆ°æœ‹å‹å½¼æ­¤é–“å‡ºç³—çš„ç•«é¢ã€‚

ä½†å‡å¦‚ä»Šå¤©æ˜¯åœ¨å¯¦éš›çš„å·¥ä½œæµç¨‹ä¸­å‘¢ï¼Ÿè®“æˆ‘å€‘çœ‹çœ‹æ²’æœ‰è‰¯å¥½è·¨åœ˜éšŠå”ä½œè¨­è¨ˆæ™‚æœƒé‡åˆ°çš„å›°é›£æƒ…å¢ƒï¼Œå°æ¼”è«‹åˆ‡ç•«é¢ï¼š

### æƒ…å¢ƒä¸€ï¼šéœ€æ±‚å‚³éçš„å¤±çœŸæ•ˆæ‡‰

- **ç”¢å“ç¶“ç†**ï¼šã€Œæˆ‘å€‘éœ€è¦ä¸€å€‹ç”¨æˆ¶ç®¡ç†åŠŸèƒ½ã€
- **å‰ç«¯å·¥ç¨‹å¸«ç†è§£**ï¼šç°¡å–®çš„ CRUD æ“ä½œç•Œé¢
- **å¾Œç«¯å·¥ç¨‹å¸«ç†è§£**ï¼šå®Œæ•´çš„ç”¨æˆ¶æ¬Šé™ç®¡ç†ç³»çµ±
- **çµæœ**ï¼šå‰ç«¯åšäº†ç°¡å–®è¡¨å–®ï¼Œå¾Œç«¯å»ºäº†è¤‡é›œçš„æ¬Šé™æ¶æ§‹ï¼Œå®Œå…¨å°ä¸ä¸Š

### æƒ…å¢ƒäºŒï¼šUI/UX è¨­è¨ˆçš„å–®æ‰“ç¨é¬¥

è¨­è¨ˆå¸«ç•«å‡ºç²¾ç¾çš„å–®å¼µç·šç¨¿ï¼Œä½†æ˜¯ï¼š

- æ²’æœ‰è€ƒæ…® API è³‡æ–™çµæ§‹é™åˆ¶
- ç¼ºä¹ä¸åŒç‹€æ…‹çš„è¨­è¨ˆï¼ˆè¼‰å…¥ä¸­ã€éŒ¯èª¤ã€ç©ºè³‡æ–™ï¼‰
- å¿½ç•¥äº†è¡Œå‹•è£ç½®çš„æŠ€è¡“é™åˆ¶
- **çµæœ**ï¼šé–‹ç™¼åˆ°ä¸€åŠç™¼ç¾è¨­è¨ˆç„¡æ³•å¯¦ç¾ï¼Œéœ€è¦å¤§å¹…ä¿®æ”¹

### æƒ…å¢ƒä¸‰ï¼šæŠ€è¡“é¸å‹çš„å„è‡ªç‚ºæ”¿

- **å‰ç«¯åœ˜éšŠ**ï¼šé¸æ“‡æœ€æ–°çš„ React 18
- **å¾Œç«¯åœ˜éšŠ**ï¼šå …æŒä½¿ç”¨ PHP 5.6
- **DevOps åœ˜éšŠ**ï¼šåªç†Ÿæ‚‰ Docker éƒ¨ç½²
- **çµæœ**ï¼šæŠ€è¡“æ£§ä¸ç›¸å®¹ï¼Œæ•´åˆæ™‚å•é¡Œç™¾å‡º

### æƒ…å¢ƒå››ï¼šAPI é–‹ç™¼çš„é›ç”Ÿè›‹å•é¡Œ

```
å‰ç«¯ï¼šã€Œå¾Œç«¯ API é‚„æ²’å¥½ï¼Œæˆ‘ç„¡æ³•é–‹ç™¼ã€
å¾Œç«¯ï¼šã€Œå‰ç«¯éœ€æ±‚ä¸æ˜ç¢ºï¼Œæˆ‘ä¸çŸ¥é“è¦æä¾›ä»€éº¼è³‡æ–™ã€
æ¸¬è©¦ï¼šã€Œæ²’æœ‰ API æ–‡ä»¶ï¼Œæˆ‘ç„¡æ³•å¯«æ¸¬è©¦æ¡ˆä¾‹ã€
ç”¢å“ï¼šã€Œç‚ºä»€éº¼é–‹ç™¼é€™éº¼æ…¢ï¼Ÿã€
```

### æƒ…å¢ƒäº”ï¼šç‰ˆæœ¬ç™¼å¸ƒçš„å”èª¿å™©å¤¢

- å‰ç«¯å®Œæˆäº†æ–°åŠŸèƒ½
- å¾Œç«¯é‚„åœ¨ä¿® bug
- è³‡æ–™åº« migration éœ€è¦åœæ©Ÿ
- **çµæœ**ï¼šç™¼å¸ƒæ—¥å»¶æœŸï¼Œå®¢æˆ¶ä¸æ»¿ï¼Œåœ˜éšŠåŠ ç­

### æƒ…å¢ƒå…­ï¼šçŸ¥è­˜å­¤å³¶æ•ˆæ‡‰

```
æƒ…å¢ƒï¼šè³‡æ·±å·¥ç¨‹å¸« A é›¢è·
å•é¡Œï¼š
- æ ¸å¿ƒç³»çµ±æ²’æœ‰æ–‡ä»¶
- API è¨­è¨ˆé‚è¼¯åªæœ‰ä»–çŸ¥é“
- æ–°äººå®Œå…¨çœ‹ä¸æ‡‚ç¨‹å¼ç¢¼
çµæœï¼šé–‹ç™¼é€Ÿåº¦é©Ÿé™ï¼Œbug é »å‡º
```

é€™äº›å ´æ™¯æ˜¯å¦ä¼¼æ›¾ç›¸è­˜ï¼Ÿå‡å¦‚å¼•èµ·äº†éƒ¨åˆ†å¤¥ä¼´ PTSD ç™¼ä½œï¼Œæˆ‘åœ¨é€™è£¡åŒæ¨£æŠ±æŒè‘— PTSD ç™¼ä½œæ™‚çš„æ‚²å‚·å¿ƒæƒ…å‘ä½ è‡´æ­‰ã€‚é€™äº›å„ç¨®éˆç•°ã€é©šæ‚šä¹ƒè‡³æ–¼é»‘è‰²å¹½é»˜çš„ç•«é¢é¡é ­æˆ–å¤šæˆ–å°‘éƒ½å‡ºç¾åœ¨æµå‚³çš„æ•…äº‹ä¸­ã€‚æˆ‘ä¹Ÿå¸Œæœ›ä¸æœƒæœ‰äººæˆç‚ºæ•…äº‹ä¸­çš„ä¸€å“¡ï¼Œé€™å°±æ˜¯ç‚ºä»€éº¼æˆ‘å€‘éœ€è¦å»ºç«‹æ¨™æº–åŒ–çš„å”ä½œè¨­è¨ˆæµç¨‹ã€‚

## å•†æ¥­é‚è¼¯çš„ç´ æ

### ç•«è™å…ˆç•«éª¨ - éª¨æ¶çš„å»ºç«‹

åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘å€‘ä¹Ÿæåˆ°ä¸€ä»¶äº‹ï¼Œ `ç³»çµ±æ˜¯å•†æ¥­æŠ½è±¡é‚è¼¯çš„å¯¦ç¾` ç¾åœ¨åœ¨ç¶“æ­·éä¸€è·¯å¾ç™¼æƒ³ã€æƒ…å¢ƒç¢ºèªã€é‚Šç•Œèˆ‡æŠ€è¡“è§£æ±ºæ–¹æ¡ˆå¾Œï¼Œæˆ‘å€‘æ¥ä¸‹ä¾†å¯ä»¥è©¦è‘—å°‡å®ƒå…·é«”ä¸‹ç­†å°‡å…¶æç¹ªå‡ºä¾†ã€‚

åœ¨å¬é–‹ç¬¬ä¸€æ¬¡æ­£å¼çš„ã€åŒ…å«é–‹ç™¼åœ˜éšŠåœ¨å…§çš„å•Ÿå‹•æœƒè­°ï¼ˆKick-off Meetingï¼‰ä¹‹å‰ï¼Œé€šå¸¸æœƒæœ‰ä¸€æ®µæ›´æ—©æœŸçš„ã€Œ`ç”¢å“ç™¼æƒ³èˆ‡æ©Ÿæœƒæ¢ç´¢`ã€éšæ®µã€‚åœ¨é€™å€‹éšæ®µï¼Œä¸»è¦æœƒå•Ÿå‹• 4 å€‹æ ¸å¿ƒè·å‹™ : **æ¥­å‹™ç™¼èµ·äºº** ã€ **ç”¢å“ç¶“ç†** ã€ **ä½¿ç”¨è€…é«”é©—è¨­è¨ˆå¸«** èˆ‡ **æŠ€è¡“ä¸»ç®¡**ï¼Œä»–å€‘çš„å·¥ä½œæ˜¯å°‡æ¨¡ç³Šçš„æƒ³æ³•å¡‘é€ æˆä¸€å€‹å¯åŸ·è¡Œçš„å°ˆæ¡ˆé››å½¢ï¼Œå…ˆå°ç›®æ¨™ä¸»è¦æ˜¯ **å°é½Šå•†æ¥­ç›®æ¨™** ã€ **å®šç¾©å•é¡Œç¯„ç–‡** ã€ **é©—è­‰ä½¿ç”¨è€…éœ€æ±‚**ã€ **ä¸¦è©•ä¼°æŠ€è¡“å¯è¡Œæ€§** ã€‚ç•¶é€™äº›ç”¢å‡ºéƒ½å…·å‚™é››å½¢å¾Œï¼Œæ‰èƒ½æœ‰æ•ˆåœ°å¬é–‹ç¬¬ä¸€æ¬¡å•Ÿå‹•æœƒè­°ï¼Œå‘æ›´å»£æ³›çš„é–‹ç™¼åœ˜éšŠèªªæ˜ä¸€å€‹æ¸…æ™°ã€æœ‰å…±è­˜ã€ä¸”å¯åŸ·è¡Œçš„å°ˆæ¡ˆæ–¹å‘ã€‚

åœ¨æ¢ç´¢éšæ®µä¸­ï¼Œæ¯å€‹è§’è‰²éƒ½æœ‰å…¶è¢«ç™¼èµ·çš„åŸå› ï¼Œ **æ¥­å‹™ç™¼èµ·äºº** ä½œç‚ºæ“æœ‰ä¸€é …å•†æ¥­ç›®æ¨™æˆ–å¾…è§£æ±ºçš„ç—›é»ä¸èªªï¼Œ**ç”¢å“ç¶“ç†** åœ¨é€™å€‹éç¨‹ä¸­è² è²¬å°‡æ¨¡ç³Šçš„å•†æ¥­ç›®æ¨™è½‰åŒ–ç‚ºå…·é«”çš„ç”¢å“é¡˜æ™¯èˆ‡ç­–ç•¥ã€‚ä»–å€‘æ˜¯å•†æ¥­éœ€æ±‚å’Œç”¢å“è§£æ±ºæ–¹æ¡ˆä¹‹é–“çš„æ©‹æ¨‘ï¼Œå®šç¾©å°ˆæ¡ˆçš„ "Why" èˆ‡ "What"ã€‚æ¥ä¸‹ä¾†å‰‡æ˜¯ **è¨­è¨ˆå¸«** ç¢ºä¿åœ˜éšŠå¾ä¸€é–‹å§‹å°±ä»¥ä½¿ç”¨è€…ç‚ºä¸­å¿ƒè€Œä¸æ˜¯åœ¨æ‰“é€ ä¸€å€‹æ²’äººæœƒç”¨çš„æ±è¥¿ã€‚æœ€å¾Œï¼Œç‚ºäº†ç¢ºä¿ç”¢å“é¡˜æ™¯ä¸æœƒèˆ‡æŠ€è¡“ç¾å¯¦è„«ç¯€ï¼ŒæŠ€è¡“ä¸»ç®¡è² è²¬å¾æŠ€è¡“è§’åº¦è©•ä¼°å¯è¡Œæ€§ï¼Œä¸¦è­˜åˆ¥æ½›åœ¨çš„æŠ€è¡“é¢¨éšªèˆ‡é™åˆ¶ï¼Œå¾è€Œé¿å…è¨­è¨ˆç¨¿å¾ˆç¾å¥½ä½†ç¾å¯¦ä¸­å¯¦ç¾æˆæœ¬éå¤§ã€‚

> æ¥­å‹™ç™¼èµ·äºº
>
> - èº«åˆ†æ„æ¶µ : éœ€æ±‚çš„æºé ­ï¼Œæ“æœ‰ä¸€é …å•†æ¥­ç›®æ¨™æˆ–å¾…è§£æ±ºçš„ç—›é»ï¼Œæ²’æœ‰ä»–å€‘ï¼Œå°ˆæ¡ˆå°±ä¸æœƒå­˜åœ¨ã€‚
> - é æœŸç”¢å‡ºæ–‡ä»¶:
>   - å•†æ¥­ç›®æ¨™ (Business Goal): æ˜ç¢ºå®šç¾©ã€Œæˆ‘å€‘æƒ³é”æˆä»€éº¼ã€ï¼Œä¾‹å¦‚ï¼šã€Œæå‡å®¢æˆ¶æ»¿æ„åº¦ 10%ã€æˆ–ã€Œå°‡è¨‚å–®è™•ç†æ™‚é–“ç¸®çŸ­ 50%ã€ã€‚
>   - å•é¡Œé™³è¿° (Problem Statement): æ¸…æ™°æè¿°ç•¶å‰çš„ç—›é»èˆ‡æŒ‘æˆ°ã€‚

> ç”¢å“ç¶“ç†
>
> - èº«åˆ†æ„æ¶µ : è² è²¬å°‡æ¨¡ç³Šçš„å•†æ¥­ç›®æ¨™è½‰åŒ–ç‚ºå…·é«”çš„ç”¢å“é¡˜æ™¯èˆ‡ç­–ç•¥ï¼Œå»ºç«‹å•†æ¥­éœ€æ±‚å’Œç”¢å“è§£æ±ºæ–¹æ¡ˆä¹‹é–“çš„æ©‹æ¨‘ï¼Œå®šç¾©å°ˆæ¡ˆçš„ "Why" èˆ‡ "What"ã€‚
> - é æœŸç”¢å‡º:
>   - ç”¢å“é¡˜æ™¯æ–‡ä»¶ (Product Vision Doc): æè¿°ç”¢å“çš„ç›®æ¨™ä½¿ç”¨è€…ã€è¦è§£æ±ºçš„å•é¡Œä»¥åŠå®ƒèˆ‡çœ¾ä¸åŒçš„åœ°æ–¹ã€‚
>   - åˆæ­¥ä½¿ç”¨è€…æ•…äº‹/å²è©© (Initial User Stories/Epics): é«˜å±¤æ¬¡çš„åŠŸèƒ½æè¿°ï¼Œç”¨ä¾†å‹¾å‹’ç”¢å“ç¯„åœã€‚
>   - å¸‚å ´èˆ‡ç«¶å“åˆ†æ (Market/Competitor Analysis): (å¯é¸) äº†è§£å¸‚å ´ç¾æ³ï¼Œç‚ºç”¢å“å®šä½æä¾›ä¾æ“šã€‚

> ä½¿ç”¨è€…é«”é©—è¨­è¨ˆå¸«
>
> - èº«åˆ†æ„æ¶µ : è² è²¬ç¢ºä¿åœ˜éšŠå¾ä¸€é–‹å§‹å°±ä»¥ä½¿ç”¨è€…ç‚ºä¸­å¿ƒï¼Œæ¢ç´¢ä½¿ç”¨è€…çš„çœŸå¯¦éœ€æ±‚èˆ‡è¡Œç‚ºï¼Œç¢ºä¿åœ˜éšŠä¸æ˜¯åœ¨æ‰“é€ ä¸€å€‹æ²’äººæƒ³ç”¨çš„æ±è¥¿ï¼›å°ˆæ³¨æ–¼ "Who are we building for?"
> - é æœŸç”¢å‡º:
>   - ä½¿ç”¨è€…æ—…ç¨‹åœ°åœ– (User Journey Map): è¦–è¦ºåŒ–å‘ˆç¾ä½¿ç”¨è€…ç‚ºé”æˆç›®æ¨™æ‰€ç¶“æ­·çš„æµç¨‹ã€æ„Ÿå—èˆ‡ç—›é»ã€‚
>   - ä½ä¿çœŸç·šæ¡†åœ– (Low-fidelity Wireframes): ç°¡å–®çš„è‰åœ–æˆ–æ–¹å¡Šåœ–ï¼Œç”¨ä¾†å¿«é€Ÿæºé€šä½ˆå±€èˆ‡æµç¨‹æ¦‚å¿µï¼Œè€Œéè¦–è¦ºç´°ç¯€ã€‚

> ç³»çµ±åˆ†æå¸« a.k.a æŠ€è¡“ä¸»ç®¡
>
> - èº«åˆ†æ„æ¶µ : è² è²¬å¾æŠ€è¡“è§’åº¦è©•ä¼°å¯è¡Œæ€§ï¼Œä¸¦è­˜åˆ¥æ½›åœ¨çš„æŠ€è¡“é¢¨éšªèˆ‡é™åˆ¶ã€‚åœ¨æœ€æ—©éšæ®µä»‹å…¥ï¼Œæ˜¯ç‚ºäº†ç¢ºä¿ç”¢å“é¡˜æ™¯ä¸æœƒèˆ‡æŠ€è¡“ç¾å¯¦è„«ç¯€ï¼Œå›ç­” "Can we build it?" çš„å•é¡Œã€‚
> - é æœŸç”¢å‡º:
>   - æŠ€è¡“å¯è¡Œæ€§è©•ä¼°å ±å‘Š (Feasibility Study): åˆ†ææ§‹æƒ³æ˜¯å¦å¯è¡Œï¼Œå¯èƒ½éœ€è¦å“ªäº›æŠ€è¡“ï¼Œä»¥åŠæ½›åœ¨çš„æ•´åˆæŒ‘æˆ°ã€‚
>   - ç³»çµ±é‚Šç•Œåœ– (System Context Diagram): ä¸€å¼µé«˜éšè¦–è§’çš„åœ–ï¼Œæ¨™ç¤ºå‡ºæˆ‘å€‘çš„ç³»çµ±ã€ä½¿ç”¨è€…ä»¥åŠéœ€è¦äº’å‹•çš„å¤–éƒ¨ç³»çµ±ã€‚
>   - æŠ€è¡“é¢¨éšªæ¸…å–® (Technical Risk List): åˆ—å‡ºå¯èƒ½å½±éŸ¿å°ˆæ¡ˆçš„æŠ€è¡“æœªçŸ¥æ•¸æˆ–éšœç¤™ã€‚

åœ¨å°æ–¼æˆ‘å€‘å³å°‡èª•ç”Ÿçš„ç³»çµ±æœ‰äº†å€‹åˆæ­¥çš„å…±åŒæ ¸å¿ƒèªçŸ¥å¾Œï¼Œæ¥ä¸‹ä¾†ä¸æ˜¯è¦å¸¶èœ‚èœœèˆ‡ä¹³é¦™çµ¦ä»–ï¼Œè€Œæ˜¯é–‹å§‹é€²è¡Œ **æƒ…å¢ƒçš„ç™¼æ•£**ã€‚

åœ¨æ ¸å¿ƒå•†æ¥­é‚è¼¯è¢«åˆæ­¥å¯¦ç¾å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥æ ¹æ“šç¾æœ‰è³‡è¨Šé€²è¡Œä¸€å ´æ¢ç´¢æ¥­å‹™é ˜åŸŸçš„å”ä½œï¼Œæ–¹å¼æœ‰å¾ˆå¤šç¨®ï¼Œåƒæ˜¯æœƒè­°æˆ–æ˜¯å·¥ä½œåŠï¼Œç›®æ¨™æ˜¯å»ºç«‹åœ˜éšŠå°æ–¼æ¥­å‹™æµç¨‹çš„å…±åŒèªè¨€èˆ‡ç†è§£ã€‚é€™æ¨£ä¸€ä¾†å°±æ¯”è¼ƒèƒ½ç¢ºä¿ **`ã€Œæˆ‘å€‘æ­£åœ¨æ‰“é€ å°çš„æ±è¥¿ (building the right thing)ã€`**ï¼Œç„¶å¾Œåœ¨é€²å…¥ **`ã€ŒæŠŠæ±è¥¿åšå° (building the thing right)ã€`** æ™‚æ‰ä¸æœƒå‡ºç¾å—è½…åŒ—è½çš„çª˜å¢ƒã€‚

ä½†åœ¨é€™å€‹å”ä½œè¨è«–éç¨‹ä¸­ï¼Œåœ˜éšŠæˆå“¡å°è¤‡é›œçš„æ¥­å‹™æµç¨‹æ²’æœ‰å…±åŒçš„ç†è§£ï¼Œå°è‡´æºé€šä¸æš¢ã€å¯¦ä½œéŒ¯èª¤æ˜¯å¸¸è¦‹çš„ä¸€å€‹æƒ…å¢ƒã€‚æˆ–è¨±å…ˆå°éƒ¨éšŠ(Pioneer)å·²ç¶“æœ‰äº†åˆæ­¥çš„ç¯„å‹æ¦‚å¿µï¼Œä½†å°±åƒæˆ‘å€‘åœ¨ä¹‹å‰èˆ‰çš„ `ã€Œå‚³è²è©±ç­’ã€` éŠæˆ²ä¾‹å­ï¼Œåœ¨é€™å€‹è¨è«–çš„éç¨‹ä¸­åˆå§‹çš„æ¦‚å¿µæœƒé€æ¼¸æ¨¡ç³ŠåŒ–èˆ‡å¤±ç„¦åˆ°æœ€å¾Œå°è‡´é–‹ç™¼èˆ‡å•†æ¥­ç›®æ¨™è„«é‰¤ã€‚åœ˜éšŠå¿™æ–¼é–‹ç™¼åŠŸèƒ½ï¼Œå»ä¸ç¢ºå®šé€™äº›åŠŸèƒ½æ˜¯å¦çœŸçš„èƒ½å¹«åŠ©å…¬å¸é”æˆå•†æ¥­ç›®æ¨™è€Œæ·ªç‚ºã€ŒåŠŸèƒ½å·¥å» ã€ã€‚é€™æ˜¯å› ç‚ºç•¶ä¸€å€‹ç³»çµ±çš„æ¥­å‹™é‚è¼¯éå¸¸è¤‡é›œï¼Œç‰½æ¶‰åˆ°å¤šå€‹éƒ¨é–€æˆ–è§’è‰²æ™‚ï¼Œæ¯å€‹äººè…¦ä¸­çš„èªçŸ¥éƒ½å¯èƒ½æ˜¯ç‰‡é¢çš„ - å°±ç®—æœ‰äº†åˆæ­¥çš„æ–‡ä»¶åšé‚Šç•Œé™å®šã€‚

æ‰€ä»¥æ¥ä¸‹ä¾†æˆ‘å°‡ç”¨æˆ‘ç™»å±±åš®å°ç¶“é©—ä¸­çš„ä¸€å€‹ç™»å±±ç›®æ¨™ç­–ç•¥åˆ¶å®šæ–¹é‡ä¾†ä¸€åŒè¨è«–åœ¨åˆ¶å®šä¸€å€‹ç›®æ¨™è¦ç•«æ™‚ï¼Œæˆ‘å€‘å¯ä»¥æœ‰ä»€éº¼æ–¹æ³•ä¾†é€²è¡Œè¨è«–ä¸¦å°‡æˆåŠŸç™»é ‚çš„è·¯å¾‘ç¹ªè£½ä¸‹ä¾†ã€‚

æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å°‡å‘è‘—ä¸–ç•Œæœ€é«˜å³° - è–æ¯å³°ï¼Œå¹éŸ¿å¾æœçš„è™Ÿè§’ã€‚

### å‘è‘—çœ¾ç¥ä¹‹å·”å‰è¡Œ - é‚å‘ç›®æ¨™çš„æ–¹æ³•è«–

**å›°é›£ä¸€. çŸ¥è­˜å­¤å³¶èˆ‡æµç¨‹æ¨¡ç³Š**

åœ¨æ”»é ‚è–æ¯å³°å‰ï¼Œæœ€é‡è¦çš„å°±æ˜¯è®“æ‰€æœ‰åš®å°ã€é›ªå·´èˆ‡ç™»å±±éšŠå“¡å°è·¯ç·šæœ‰å…±åŒçš„èªçŸ¥ã€‚å¦‚æœåš®å°è…¦ä¸­çš„è·¯ç·šæ˜¯å¾å—å¡èµ°ï¼Œä½†é›ªå·´å»ä»¥ç‚ºè¦å¾åŒ—å¡é‹è£œçµ¦ï¼Œé‚£ç½é›£å°±ä¸é äº†ï¼Œæˆ‘å€‘å¿…é ˆè¦æ¸…æ¥šæœƒç¶“éé‚£äº›é€”å¾‘ï¼Œæˆ‘è©²æ€éº¼é–‹å§‹?è¦æŠµé”å“ªå€‹åœ‹å®¶?æˆ‘çš„è£œçµ¦ç«™æœ‰å“ªäº›?ã€‚åœ˜éšŠæœ€æ€•çš„å°±æ˜¯æ¯å€‹äººå°ã€Œè·¯ç·šã€çš„ç†è§£éƒ½åªæ˜¯ç‰‡é¢çš„ï¼Œé€™æ™‚çš„æ ¸å¿ƒå•é¡Œæ˜¯ï¼š**`ã€Œæˆ‘å€‘çš„æ”»é ‚è·¯ç·šåˆ°åº•ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿã€(æˆ‘å€‘çš„æ¥­å‹™æµç¨‹åˆ°åº•ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿ)`**ã€‚**`Event Storming (äº‹ä»¶é¢¨æš´)`** æ­£æ˜¯è§£æ±ºæ­¤å•é¡Œçš„æœ€ä½³æ–¹å¼ã€‚å®ƒå°±åƒæŠŠæ‰€æœ‰æ ¸å¿ƒæˆå“¡é—œåœ¨ä¸€å€‹æˆ¿é–“ï¼Œæ”¤é–‹ä¸€å¼µå·¨å¤§çš„è–æ¯å³°åœ°åœ–ï¼Œè¦æ±‚å¤§å®¶ç”¨ä¾¿åˆ©è²¼æ¨™ç¤ºå‡ºå¾ã€ŒæŠµé”åŠ å¾·æ»¿éƒ½ã€åˆ°ã€ŒæˆåŠŸç™»é ‚ä¸¦è¿”å›ã€ä¹‹é–“æ‰€æœ‰é—œéµçš„ã€Œäº‹ä»¶ã€ï¼Œæ¯ä¸€å€‹å°å‹ç›®æ¨™å¯èƒ½å°±åŒ…å«äº†èƒŒå¾Œç¨ç‰¹çš„æ¥­å‹™é‚è¼¯ - è€Œé€™å…¶å¯¦å°±æ˜¯ **é ˜åŸŸ(Domain)** çš„å¯¦ä½œ! ä¾‹å¦‚ï¼š`è£å‚™å·²å®Œæˆæª¢é»`ã€`å·²æŠµé”åŸºåœ°ç‡Ÿ`ã€`å·²é€šéæ˜†å¸ƒå†°ç€‘`ã€`ç¬¬å››ç‡Ÿå·²å»ºç«‹`ã€‚é€™å€‹éç¨‹èƒ½å¿«é€Ÿå»ºç«‹ä¸€æ¢å…±äº«çš„æ”»é ‚è—åœ–ï¼Œä¸¦æš´éœ²æ‰€æœ‰äººçš„çŸ¥è­˜ç¼ºå£èˆ‡éŒ¯èª¤å‡è¨­ã€‚

**å›°é›£äºŒ. å¾…è¾¦æ¸…å–®å¤±å»è„ˆçµ¡**

å³ä½¿è·¯ç·šæ˜ç¢ºäº†ï¼Œæ¥ä¸‹ä¾†çš„è£å‚™æ¸…å–®ä¹Ÿå¯èƒ½æ˜¯ä¸€å ´æ··äº‚ã€‚å¦‚æœæˆ‘å€‘åªæ‹¿åˆ°ä¸€å¼µå¯«è‘—ã€Œå†°çˆªã€æ°§æ°£ç“¶ã€ç¹©ç´¢ã€é«˜å±±é´ã€èƒ½é‡æ£’ã€çš„æ‰å¹³æ¸…å–®ï¼Œæˆ‘å€‘å¾ˆé›£çŸ¥é“å“ªäº›æ˜¯ç‚ºäº†åŸºåœ°ç‡Ÿé©æ‡‰ï¼Œå“ªäº›æ˜¯ç‚ºäº†æœ€çµ‚æ”»é ‚è¡åˆºã€‚é€™æ™‚çš„æ ¸å¿ƒå•é¡Œæ˜¯ï¼š**`ã€Œæˆ‘å€‘è©²å…ˆæº–å‚™ä»€éº¼ï¼Ÿç™»å±±è€…å¦‚ä½•å¾é ­åˆ°å°¾å®Œæˆé€™æ¬¡é å¾ï¼Ÿã€(ä½¿ç”¨è€…æ˜¯å¦‚ä½•ä½¿ç”¨æˆ‘å€‘çš„ç”¢å“ä¾†å®Œæˆä»–çš„ç›®æ¨™çš„ï¼Ÿ)`**ã€‚è‹¥ç„¡æ³•å›ç­”ï¼Œåœ˜éšŠéƒ½å°‡é›£ä»¥å®šç¾©å‡ºç¬¬ä¸€éšæ®µã€Œæµ·æ‹”é©æ‡‰ã€çš„ **æœ€å°å¯è¡Œè£å‚™(MVP)** ã€‚ç‚ºæ­¤ï¼Œ**`User Story Mapping (ä½¿ç”¨è€…æ•…äº‹åœ°åœ–)`** æä¾›äº†çµ•ä½³çš„è¦–è§’ã€‚å®ƒå°‡æ‰å¹³çš„ **è£å‚™(åŠŸèƒ½)** æ¸…å–®ï¼Œæ²¿è‘— **ã€Œä½¿ç”¨è€…æ´»å‹•çš„å…ˆå¾Œé †åºã€** ï¼ˆä¾‹å¦‚ï¼š`æŠµé”å°¼æ³Šçˆ¾` -> `åŸºåœ°ç‡Ÿå¥è¡Œ` -> `æµ·æ‹”é©æ‡‰` -> `æ”»é ‚èˆ‡ä¸‹æ’¤`ï¼‰å±•é–‹ï¼Œè®Šæˆä¸€å¼µæœ‰è„ˆçµ¡çš„åœ°åœ–ã€‚é€™è®“åœ˜éšŠèƒ½é³¥ç°æ•´å€‹é å¾è¨ˆç•«ï¼Œä¸¦èƒ½è¼•æ˜“åœ°å¾ä¸­æ°´å¹³åˆ‡åˆ†å‡ºã€Œç¬¬ä¸€éšæ®µï¼šåŸºåœ°ç‡Ÿé©æ‡‰ã€æ‰€éœ€çš„æ ¸å¿ƒè£å‚™èˆ‡ä»»å‹™ï¼Œä»¥ç¢ºä¿æ¯å€‹ **è£å‚™(åŠŸèƒ½)** éƒ½èƒ½æä¾›é€£è²«ä¸”æœ‰åƒ¹å€¼çš„ä½œåŠŸã€‚ã€‚

**å›°é›£ä¸‰. é–‹ç™¼èˆ‡å•†æ¥­ç›®æ¨™è„«é‰¤**

ä½†åœ¨é€²è¡Œè¦ç•«çš„æ™‚å€™ï¼Œæœ‰æ™‚åœ˜éšŠæœƒé™·å…¥ä¸€å€‹é™·é˜±ï¼šæˆ‘å€‘å¾ˆæ“…é•·æ¡è³¼è£å‚™ã€è¨“ç·´é«”èƒ½ï¼Œæ–¼æ˜¯å°±ä¸æ–·åœ°è²·è£å‚™ã€åšè¨“ç·´ï¼Œè®Šæˆé«˜æ•ˆçš„ã€Œé å¾æº–å‚™å·¥å» ã€ã€‚è®ŠæˆæŠ€è¡“ç²¾æ¹›çš„ç™»å±±å®¶ï¼Œåƒ…å¿™è‘—é›éŠæœ€å¼·çš„é«”é­„ï¼Œå»æ²’æœ‰äººå»ç¢ºèªé€™æ¬¡æ”€ç™»çš„æœ€çµ‚ç›®æ¨™æ˜¯ç‚ºäº† **ã€Œå•†æ¥­è´ŠåŠ©æ›å…‰ã€** é‚„æ˜¯ **ã€Œç§‘å­¸ç ”ç©¶ã€** ã€‚ç•¶åœ˜éšŠçš„æˆåŠŸåªç”¨ã€Œæ¡è³¼äº†å¤šå°‘é ‚ç´šè£å‚™ã€ä¾†è¡¡é‡ï¼Œè€Œä¸æ˜¯ã€Œæ˜¯å¦é”æˆäº†é å¾çš„å•†æ¥­åƒ¹å€¼ã€æ™‚ï¼Œå°±ç”¢ç”Ÿäº†ä¸€å€‹è‡´å‘½å•é¡Œï¼š**`ã€Œæˆ‘å€‘åšçš„é€™äº›æº–å‚™ï¼ŒçœŸçš„èƒ½å¹«åŠ©è´ŠåŠ©å•†é”æˆç›®æ¨™å—ï¼Ÿã€(æˆ‘å€‘ç‚ºä»€éº¼è¦åšé€™å€‹ï¼Ÿ)`**ã€‚**`Impact Mapping (å½±éŸ¿åŠ›åœ°åœ–)`** æ­£æ˜¯ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œè€Œç”Ÿï¼Œå®ƒå¼·è¿«åœ˜éšŠå¾çµ‚é»ï¼ˆWhy - å•†æ¥­ç›®æ¨™ï¼Œå¦‚ï¼š`æå‡å“ç‰Œæ›å…‰ç‡30%`ï¼‰é–‹å§‹æ€è€ƒï¼Œåå‘æ¨å°ç‚ºäº†é”æˆç›®æ¨™éœ€è¦å½±éŸ¿èª°ï¼ˆWho - `åª’é«”è¨˜è€…`ï¼‰ã€æˆ‘å€‘å¸Œæœ›ä»–å€‘çš„è¡Œç‚ºå¦‚ä½•æ”¹è®Šï¼ˆHow - `ç™¼å¸ƒæ”»é ‚æˆåŠŸçš„æ–°èç¨¿`ï¼‰ï¼Œæœ€å¾Œæ‰æ±ºå®šæˆ‘å€‘è©²åšä»€éº¼ï¼ˆWhat - `åœ¨é ‚å³°æ‹æ”å“ç‰Œæ——å¹Ÿ`ï¼‰ã€‚é€™ç¢ºä¿äº†æ¯ä¸€æ¬¡çš„æº–å‚™ï¼Œéƒ½èˆ‡æœ€çµ‚çš„å•†æ¥­åƒ¹å€¼ç·Šå¯†ç›¸é€£ã€‚

**å›°é›£å››. æœªæŒ–æ˜å‡ºçœŸå¯¦å‹•æ©Ÿ**

åœ¨é€²è¡Œè·¯å¾‘è¦åŠƒæ™‚ï¼Œç‚ºäº†æœ‰ä¸€å€‹ç²—ç•¥ä¸”è¢«æ¶µåŒ–çš„å…±åŒèªçŸ¥ï¼Œæˆ‘å€‘å¸¸æœƒå®šç¾©åƒèˆ‡åœ˜å“¡çš„ **è§’è‰²å´å¯«**ï¼Œä¾‹å¦‚ã€ŒMikeï¼Œ30 æ­²çš„ä¼æ¥­å®¶ï¼Œå–œæ­¡æ¥µé™é‹å‹•ã€ã€‚ä½†é€™å°±åƒåš®å°åªæ ¹æ“šå®¢æˆ¶çš„è·æ¥­å’Œå¹´é½¡å°±è¦åŠƒè·¯ç·šï¼Œå»æ²’å•ä»–ç‚ºä»€éº¼æƒ³ç™»å±±ã€‚æˆ‘å€‘å¯èƒ½è¦åŠƒå‡ºä¸€æ¢ Mikeã€Œæ‡‰è©²ã€æœƒå–œæ­¡çš„æŒ‘æˆ°è·¯ç·šï¼Œå»æ²’è§£æ±ºä»–çœŸæ­£çš„æ¸´æœ›(åœ¨ç¤¾ç¾¤ç¶²è·¯ä¸­å¤§ç´…å¤§ç´«ã€è‡ªæˆ‘å¯¦ç¾åˆæˆ–æ˜¯å–®ç´”æƒ³å¸å¼•æŸå€‹äººçš„æ³¨æ„åŠ›?)ã€‚å•é¡Œçš„æ ¸å¿ƒåœ¨æ–¼ï¼š**`ã€Œå®¢æˆ¶ç‚ºä»€éº¼è¦ã€é›‡ç”¨ã€æˆ‘å€‘å¸¶ä»–å»ç™»å±±ï¼Ÿä»–æƒ³å®Œæˆçš„å…§å¿ƒä»»å‹™æ˜¯ä»€éº¼ï¼Ÿã€(ä½¿ç”¨è€…æƒ³ã€é›‡ç”¨ã€æˆ‘å€‘çš„ç”¢å“ä¾†å®Œæˆä»€éº¼ã€ä»»å‹™ã€ï¼Ÿ)`**ã€‚å‚³çµ±æ–¹æ³•è®“æˆ‘å€‘å°ˆæ³¨æ–¼ã€Œç™»å±±è€…æ˜¯èª°ã€ï¼Œå»å¿½ç•¥äº†ä»–å€‘æƒ³ã€Œå®Œæˆä»€éº¼ä»»å‹™ã€ã€‚**`Jobs to be Done (JTBD)`** ç†è«–æä¾›äº†ä¸€å€‹æ–°è¦–è§’ï¼Œå®ƒè®“æˆ‘å€‘å»æ¢ç©¶å®¢æˆ¶åœ¨ã€Œäººç”Ÿé‡åˆ°ç“¶é ¸ã€çš„ã€Œæƒ…å¢ƒã€ä¸‹ï¼Œæƒ³è¦ã€Œé›‡ç”¨ã€ä¸€æ¬¡è–æ¯å³°æ”€ç™»ä¾†ã€Œå®Œæˆã€ã€Œè­‰æ˜è‡ªæˆ‘ã€å°‹æ‰¾çªç ´ã€çš„ã€Œä»»å‹™ã€ã€‚ç†è§£é€™é»ï¼Œæˆ‘å€‘æä¾›çš„å¯èƒ½å°±ä¸åªæ˜¯ä¸€æ¢è·¯ç·šï¼Œè€Œæ˜¯ä¸€æ•´å¥—èƒ½å¹«åŠ©ä»–åæ€èˆ‡æˆé•·çš„é«”é©—ã€‚é€™å¹«åŠ©æˆ‘å€‘æŒ–æ˜å®¢æˆ¶æœ€æ·±å±¤çš„å‹•æ©Ÿï¼Œå¾è€Œè¨­è¨ˆå‡ºçœŸæ­£èƒ½è§¸å‹•äººå¿ƒçš„é å¾æ–¹æ¡ˆã€‚

ç¾åœ¨ï¼Œæˆ‘å€‘çŸ¥é“äº†å¦‚ä½•èˆ‡åœ˜éšŠä¸€åŒæˆå°±ï¼Œåœ¨æ³°æ‹‰æœ€é«˜è™•çš„çš„åœ°æ–¹è§¸ç¢°å®‡å®™çš„é¡è‰²ã€‚

ç¶“ç”±é€™äº›æ–¹æ³•è«–èˆ‡å¥—è«–å¾Œçš„æƒ…å¢ƒé‚Šç•Œè¨­å®šï¼Œæˆ‘å€‘å°æ–¼æ•´å€‹ **ç™»å±±è·¯å¾‘(ç³»çµ±è„ˆçµ¡)** å°±æœƒè®Šå¾—æ¸…æ¥šï¼ŒçŸ¥ä¹‹ç‚ºçŸ¥ä¹‹å¤§å®¶éƒ½çŸ¥é“æ˜¯é‡è¦çš„ï¼Œä½†è¦é”æˆæ˜¯çŸ¥ä¹Ÿçš„å‰ææ˜¯ä¹Ÿè¦çŸ¥é“ **ä¸çŸ¥ç‚ºä¸çŸ¥**ã€‚

1. Event Storming (äº‹ä»¶é¢¨æš´)

- åˆ‡å…¥é»: ã€Œæˆ‘å€‘çš„æ¥­å‹™æµç¨‹åˆ°åº•ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿã€
- é©…å‹•åŸå› : ç•¶ä¸€å€‹ç³»çµ±çš„æ¥­å‹™é‚è¼¯éå¸¸è¤‡é›œï¼Œç‰½æ¶‰åˆ°å¤šå€‹éƒ¨é–€æˆ–è§’è‰²æ™‚ï¼Œæ¯å€‹äººè…¦ä¸­çš„èªçŸ¥éƒ½å¯èƒ½æ˜¯ç‰‡é¢çš„ã€‚é–‹ç™¼è€…ä¸ç†è§£æ¥­å‹™ï¼Œæ¥­å‹™äººå“¡ä¸ç†è§£ç³»çµ±é™åˆ¶ã€‚
- è§£æ±ºæ–¹æ¡ˆ: å®ƒé€éä¸€å€‹å”ä½œå·¥ä½œåŠï¼Œè®“æ‰€æœ‰åˆ©å®³é—œä¿‚äººï¼ˆæ¥­å‹™ã€PMã€é–‹ç™¼ã€æ¸¬è©¦ï¼‰ä¸€èµ·ï¼Œç”¨ä¾¿åˆ©è²¼å°‡æ¥­å‹™æµç¨‹ä¸­æ‰€æœ‰å·²ç™¼ç”Ÿçš„ã€Œé ˜åŸŸäº‹ä»¶ (Domain Events)ã€(ä¾‹å¦‚ï¼šè¨‚å–®å·²æˆç«‹ã€æ¬¾é …å·²æ”¯ä»˜) æŒ‰æ™‚é–“åºæ’åˆ—å‡ºä¾†ã€‚é€™å¼·è¿«å¤§å®¶å»ºç«‹ä¸€å€‹å°æ•´å€‹æµç¨‹çš„å…±äº«è—åœ–ï¼Œå¾è€Œç™¼ç¾çŸ¥è­˜ç¼ºå£å’Œèª¤è§£ã€‚

2. User Story Mapping (ä½¿ç”¨è€…æ•…äº‹åœ°åœ–)

- åˆ‡å…¥é»: ã€Œä½¿ç”¨è€…æ˜¯å¦‚ä½•ä½¿ç”¨æˆ‘å€‘çš„ç”¢å“ä¾†å®Œæˆä»–çš„ç›®æ¨™çš„ï¼Ÿã€
- é©…å‹•åŸå› : å‚³çµ±çš„ç”¢å“å¾…è¾¦æ¸…å–® (Product Backlog) å°±åƒä¸€å¼µé•·é•·çš„è³¼ç‰©æ¸…å–®ï¼Œç¼ºä¹ä¸Šä¸‹æ–‡ã€‚åœ˜éšŠå¾ˆå®¹æ˜“è¿·å¤±åœ¨å–®ä¸€åŠŸèƒ½ä¸­ï¼Œå¿˜è¨˜äº†é€™äº›åŠŸèƒ½å¦‚ä½•ä¸²é€£æˆä¸€å€‹å®Œæ•´çš„ä½¿ç”¨è€…é«”é©—ã€‚
- è§£æ±ºæ–¹æ¡ˆ: å®ƒå°‡ä½¿ç”¨è€…æ•…äº‹æŒ‰ç…§ã€Œä½¿ç”¨è€…æ´»å‹•çš„å…ˆå¾Œé †åºã€é€²è¡ŒäºŒç¶­æ’åˆ—ï¼Œå½¢æˆä¸€å¼µåœ°åœ–ã€‚é€™å¼µåœ°åœ–çš„ã€Œéª¨å¹¹ã€å°±æ˜¯ä½¿ç”¨è€…çš„æ—…ç¨‹ï¼Œå¹«åŠ©åœ˜éšŠå¾é ­åˆ°å°¾é³¥ç°ç”¢å“ï¼Œä¸¦èƒ½è¼•æ˜“åœ°åœ¨ä¸Šé¢åŠƒåˆ†å‡ºå“ªå€‹ç‰ˆæœ¬è©²åŒ…å«å“ªäº›åŠŸèƒ½ï¼Œä»¥ç¢ºä¿æ¯å€‹ç‰ˆæœ¬éƒ½èƒ½æä¾›é€£è²«ä¸”æœ‰åƒ¹å€¼çš„é«”é©—ã€‚

3. Impact Mapping (å½±éŸ¿åŠ›åœ°åœ–)

- åˆ‡å…¥é»: ã€Œæˆ‘å€‘ç‚ºä»€éº¼è¦åšé€™å€‹ï¼Ÿå®ƒèƒ½å¸¶ä¾†ä»€éº¼æ”¹è®Šï¼Ÿã€
- é©…å‹•åŸå› : å¾ˆå¤šå°ˆæ¡ˆåœ¨é–‹å§‹æ™‚åªå®šç¾©äº†è¦ã€Œåšä»€éº¼ (What)ã€ï¼Œå»æ²’æœ‰æ¸…æ™°åœ°é€£çµåˆ°ã€Œç‚ºä»€éº¼ (Why)ã€ã€‚å°è‡´é–‹ç™¼åœ˜éšŠäº¤ä»˜äº†åŠŸèƒ½ï¼Œä½†å•†æ¥­æŒ‡æ¨™ï¼ˆå¦‚ç‡Ÿæ”¶ã€ç•™å­˜ç‡ï¼‰å»æ²’æœ‰æå‡ã€‚
- è§£æ±ºæ–¹æ¡ˆ: å®ƒæ˜¯ä¸€å€‹ç­–ç•¥è¦åŠƒå·¥å…·ï¼Œå¼·è¿«åœ˜éšŠå¾æœ€çµ‚çš„ã€Œå•†æ¥­ç›®æ¨™ (Goal)ã€å‡ºç™¼ï¼Œåå‘æ¨å°ï¼šç‚ºäº†é”æˆé€™å€‹ç›®æ¨™ï¼Œéœ€è¦å½±éŸ¿å“ªäº›ã€Œè§’è‰² (Actors)ã€ï¼Ÿæˆ‘å€‘å¸Œæœ›ä»–å€‘çš„ã€Œè¡Œç‚ºç”¢ç”Ÿä»€éº¼æ”¹è®Š (Impact)ã€ï¼Ÿæœ€å¾Œæ‰æ€è€ƒã€Œæˆ‘å€‘è©²åšä»€éº¼åŠŸèƒ½ (Deliverable)ã€ä¾†ä¿ƒæˆé€™å€‹æ”¹è®Šã€‚å®ƒç¢ºä¿äº†æ¯ä¸€ä»½é–‹ç™¼åŠªåŠ›éƒ½èˆ‡å•†æ¥­åƒ¹å€¼ç›´æ¥æ›é‰¤ã€‚

4. Jobs to be Done (JTBD)

- åˆ‡å…¥é»: ã€Œä½¿ç”¨è€…æƒ³ã€é›‡ç”¨ã€æˆ‘å€‘çš„ç”¢å“ä¾†å®Œæˆä»€éº¼ã€ä»»å‹™ã€ï¼Ÿã€
- é©…å‹•åŸå› : å‚³çµ±çš„ä½¿ç”¨è€…ç•«åƒ (Persona) æè¿°äº†ã€Œä½¿ç”¨è€…æ˜¯èª°ã€ï¼ˆä¾‹å¦‚ï¼š35 æ­²ï¼Œä½åœ¨å¤§åŸå¸‚ï¼Œå–œæ­¡ç§‘æŠ€ï¼‰ï¼Œä½†æ²’æœ‰è§£é‡‹ä»–ã€Œç‚ºä»€éº¼ã€æœƒåœ¨æ­¤æ™‚æ­¤åˆ»éœ€è¦ä¸€å€‹è§£æ±ºæ–¹æ¡ˆã€‚é€™å¯èƒ½å°è‡´åœ˜éšŠæ‰“é€ å‡ºä¸€å€‹ç¬¦åˆä½¿ç”¨è€…è¼ªå»“ï¼Œå»ç„¡æ³•è§£æ±ºå…¶æ ¹æœ¬å•é¡Œçš„ç”¢å“ã€‚
- è§£æ±ºæ–¹æ¡ˆ: JTBD æ¡†æ¶å°‡ç„¦é»å¾ä½¿ç”¨è€…æœ¬èº«è½‰ç§»åˆ°ä»–å€‘æ‰€è™•çš„ã€Œæƒ…å¢ƒã€å’Œæƒ³è¦é”æˆçš„ã€Œé€²å±•ã€ã€‚å®ƒèªç‚ºä½¿ç”¨è€…æ˜¯ç‚ºäº†å®ŒæˆæŸé …ã€Œä»»å‹™ã€æ‰ã€Œé›‡ç”¨ã€ç”¢å“ã€‚é€éç†è§£é€™å€‹ä»»å‹™èƒŒå¾Œçš„æ™æ‰èˆ‡å‹•æ©Ÿï¼Œåœ˜éšŠå¯ä»¥è¨­è¨ˆå‡ºæ›´èƒ½åˆ‡ä¸­è¦å®³ã€ç”šè‡³æ›´å…·å‰µæ–°æ€§çš„è§£æ±ºæ–¹æ¡ˆã€‚

ç¶“éå‰é¢çš„åˆæœŸæ¢ç´¢ï¼Œä»¥åŠæ–¹æ³•è«–æ´—ç¦®ï¼Œæˆ‘å€‘çš„æ ¸å¿ƒåœ˜éšŠçµ‚æ–¼å°é€™è¶Ÿé å¾æœ‰äº†æ¸…æ™°ä¸”æ·±åˆ»çš„å…±è­˜ã€‚æˆ‘å€‘ä¸åƒ…ç¹ªè£½äº†æ”»é ‚çš„ **è·¯ç·šåœ– (æ¥­å‹™æµç¨‹)**ï¼Œè¦åŠƒäº†æ¯å€‹éšæ®µçš„ **è¡Œç¨‹ (ä½¿ç”¨è€…æ•…äº‹åœ°åœ–)**ï¼Œç¢ºç«‹äº†æ­¤æ¬¡æ”€ç™»çš„ **å•†æ¥­ç›®çš„ (å½±éŸ¿åŠ›åœ°åœ–)**ï¼Œæ›´æ´æ‚‰äº†ç™»å±±è€…å…§å¿ƒæ·±è™•çš„ **æ¸´æœ› (Jobs to be Done)**ã€‚

è‡³æ­¤ï¼Œæˆ‘å€‘æˆåŠŸåœ°å›ç­”äº†ã€Œæˆ‘å€‘ç‚ºä»€éº¼è¦å»ï¼Ÿã€å’Œã€Œæˆ‘å€‘å¤§è‡´è¦å»å“ªè£¡ï¼Ÿã€é€™å…©å€‹æˆ°ç•¥å±¤é¢çš„å•é¡Œã€‚å› æ­¤ï¼Œåœ¨é€²å…¥å¤§è¦æ¨¡é–‹ç™¼ã€ä¹Ÿå°±æ˜¯ã€ŒæŠŠæ±è¥¿åšå° (building the thing right)ã€çš„éšæ®µå‰ï¼Œæˆ‘å€‘å¿…é ˆå°‡é€™ä»½é«˜å±¤æ¬¡çš„å…±è­˜ï¼Œè½‰åŒ–ç‚ºä¸€ä»½æ‰€æœ‰æŠ€è¡“åœ˜éšŠéƒ½èƒ½ç†è§£ä¸¦éµå®ˆçš„ã€å…·é«”çš„ã€å¯åŸ·è¡Œçš„æŠ€è¡“æ–‡ä»¶ã€‚é€™ä»½è—åœ–ï¼Œå°±æ˜¯æˆ‘å€‘æ¥ä¸‹ä¾†è¦è«‡çš„ã€Œå…±åŒå¥‘ç´„ã€ã€‚

## å¯æ–‡æª”ç‰ˆæ§çš„è¦–è¦ºåŒ–å•†æ¥­é‚è¼¯å…·è±¡

åœ¨ç¶“æ­·ç¬¬ä¸€éšæ®µå•†æ¥­é‚è¼¯çš„ç´ æå¾Œï¼Œæˆ‘å€‘å¤§è‡´çŸ¥é“äº†æˆ‘å€‘çš„ç³»çµ±èˆ‡ä»–çš„ç³»çµ±é‚Šç•Œï¼Œç‚ºäº†è®“ä¸åŒèƒŒæ™¯çš„åœ˜éšŠæˆå“¡èƒ½å¤ é«˜æ•ˆå”ä½œï¼Œæˆ‘å€‘éœ€è¦æœ‰ä¸€å€‹å¯¦é«”çš„ã€éæŠ½è±¡åŒ–çš„æ–‡ä»¶æª”ä½œç‚ºä¾æ“šã€‚å°±åƒæ¨‚åœ˜æ¼”å¥æ™‚éœ€è¦æ¨‚è­œä¸€æ¨£ï¼Œè»Ÿé«”é–‹ç™¼åœ˜éšŠéœ€è¦æ¸…æ™°çš„æŠ€è¡“è¦ç¯„ä¾†ç¢ºä¿å’Œè«§å”ä½œã€‚æƒ³åƒä¸€ä¸‹ï¼Œæˆ‘å€‘æ­£åœ¨å»ºé€ ä¸€åº§å¤§å‹è³¼ç‰©ä¸­å¿ƒï¼Œéœ€è¦å»ºç¯‰å¸«ã€é›»å·¥ã€æ°´ç®¡å·¥ã€å®¤å…§è¨­è¨ˆå¸«ç­‰å¤šå€‹å°ˆæ¥­åœ˜éšŠå”ä½œï¼Œå¦‚æœæ²’æœ‰çµ±ä¸€çš„è—åœ–å’Œæºé€šæ¨™æº–ï¼Œæ¯å€‹åœ˜éšŠéƒ½æŒ‰è‡ªå·±çš„ç†è§£æ–½å·¥ï¼Œæœ€çµ‚æœƒæ˜¯ä¸€å ´ç½é›£ã€‚

åœ¨è»Ÿé«”é–‹ç™¼ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼š

- **å‰ç«¯åœ˜éšŠ**éœ€è¦çŸ¥é“å¦‚ä½•å‘å¾Œç«¯è«‹æ±‚è³‡æ–™
- **å¾Œç«¯åœ˜éšŠ**éœ€è¦æ˜ç¢ºæä¾›ä»€éº¼æ ¼å¼çš„è³‡æ–™
- **æ¸¬è©¦åœ˜éšŠ**éœ€è¦äº†è§£ç³»çµ±å¦‚ä½•é‹ä½œ
- **ç”¢å“åœ˜éšŠ**éœ€è¦ç¢ºèªåŠŸèƒ½æ˜¯å¦ç¬¦åˆéœ€æ±‚

æ¥ä¸‹ä¾†å°±å¯ä»¥å°‡å¯¦éš›æ¥­å‹™æƒ…å¢ƒå…·è±¡åŒ–æˆæ–‡æª”å”åŠ©æˆ‘å€‘åœ¨é–‹ç™¼æµç¨‹ä¸­ä¸æ–·åœ°æ¯”ç…§è·¯å¾‘åœ–ç¢ºèªè‡ªå·±ä¸¦æ²’æœ‰è·‘åã€‚å¤§è‡´ä¸Šçš„åƒè€ƒé †åºæœƒæ˜¯:

```python
å…±ç”¨å¥‘ç´„ (Shared Contract) => ç³»çµ±äº¤äº’ä»‹é¢(OpenAPI) => æŠ€è¡“æ–‡ä»¶ (Technical Documentation)
```

ä»¥ä¸‹å°‡æŒ‰ç…§é †åºåˆ†åˆ¥èªªæ˜æ‡‰ç”¨æƒ…å¢ƒèˆ‡ç¯„ä¾‹

### 1. å…±ç”¨å¥‘ç´„ (Shared Contract)

ç°¡å–®ä¾†èªªï¼Œå…±ç”¨å¥‘ç´„å°±åƒæ˜¯å»ºç¯‰è—åœ–ä¸­çš„ã€ŒIPLC é›»è·¯è¦æ ¼ã€æˆ–ã€Œåœ‹éš› PVC-U æ°´ç®¡å°ºå¯¸æ¨™æº–ã€ã€‚å®ƒæœ‰è‘—æœ€åŸºç¤çš„è¦æ ¼ä¾æ“šè®“è² è²¬ä¸åŒéƒ¨åˆ†çš„å·¥ç­ï¼ˆé–‹ç™¼åœ˜éšŠï¼‰å¯ä»¥ç¨ç«‹æ–½å·¥ï¼Œç¢ºä¿æœ€çµ‚æ‰€æœ‰é›¶ä»¶éƒ½èƒ½å®Œç¾åœ°çµ„è£åœ¨ä¸€èµ·ï¼Œå¾è€Œé¿å…æºé€šä¸è‰¯å’Œæ•´åˆæ™‚çš„æ··äº‚ã€‚å¸¸è¦‹çš„ç´„å®šå±¤é¢æœ‰ : **è³‡æ–™æ ¼å¼ç´„å®š** ã€ **é€šè¨Šå”å®šç´„å®š** ã€ **éŒ¯èª¤è™•ç†ç´„å®š**ã€‚

ä¾‹å¦‚:

- ä½¿ç”¨ **JSON Schema** æˆ– **GraphQL Schema** ä¾†æ˜ç¢ºè¦å®šä¸€å€‹ `respond` ç‰©ä»¶å¿…é ˆåŒ…å« `isSuccess` ã€ `element` ã€ `errorMessage`... ç­‰æ¬„ä½ä»¥åŠå®ƒå€‘çš„è³‡æ–™å‹åˆ¥ã€‚
- ä½¿ç”¨å¸¸è¦‹çš„ HTTP/RESTful API é‚„æ˜¯æ•ˆèƒ½æ›´å¥½çš„ gRPCã€‚
- æ‰€æœ‰ API ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œéƒ½å›å‚³å›ºå®šçš„éŒ¯èª¤ç¢¼å’Œè¨Šæ¯æ ¼å¼ï¼Œè®“å‘¼å«æ–¹èƒ½ä¸€è‡´åœ°è™•ç†ã€‚

é€™å€‹å…±åŒçš„èªçŸ¥æ–‡ä»¶æ˜¯ä¸€ä»½è·¨åœ˜éšŠçš„å…±åŒèªè¨€ï¼Œå¹¾ä¹æ‰€æœ‰åƒèˆ‡ç”¢å“é–‹ç™¼çš„æŠ€è¡“å’Œç”¢å“åœ˜éšŠéƒ½æœƒä»¥ä¸åŒæ–¹å¼ä½¿ç”¨åˆ°å®ƒã€‚

**å‰ç«¯åœ˜éšŠ (Frontend Team)** / **è¡Œå‹•æ‡‰ç”¨åœ˜éšŠ (Mobile App Team) ** å¯ä»¥ä½¿ç”¨å¥‘ç´„ç”¢ç”Ÿ Mock Data (æ¨¡æ“¬è³‡æ–™)ï¼Œåœ¨å¾Œç«¯ API é‚„æ²’å®Œæˆæ™‚ä¹Ÿèƒ½ç¨ç«‹é–‹ç™¼å’Œæ¸¬è©¦ï¼Œé¿å…åœ¨æ•´åˆæ™‚æ‰ç™¼ç¾ã€Œå¾Œç«¯çµ¦çš„è³‡æ–™æ ¼å¼è·Ÿæˆ‘æƒ³çš„ä¸ä¸€æ¨£ã€ã€‚å¥‘ç´„å‘Šè¨´ä»–å€‘å¯ä»¥å‘å¾Œç«¯è«‹æ±‚ä»€éº¼è³‡æ–™ã€éœ€è¦ç”¨ä»€éº¼æ ¼å¼ç™¼é€è«‹æ±‚ï¼Œä»¥åŠæœƒæ”¶åˆ°ä»€éº¼æ ¼å¼çš„å›æ‡‰ï¼Œæ¥ä¸‹ä¾†æ‰èƒ½æ ¹æ“šå¥‘ç´„å®šç¾©çš„è³‡æ–™çµæ§‹ä¾†é–‹ç™¼ UI ä»‹é¢ã€‚

**å¾Œç«¯åœ˜éšŠ (Backend Team)** æ˜¯ API çš„ã€Œæä¾›è€…ã€ï¼Œå¥‘ç´„æ˜¯ä»–å€‘éœ€è¦å±¥è¡Œçš„æ‰¿è«¾èˆ‡è¦æ ¼æ›¸ã€‚ä¸€æ—¦å‡ºç¾å·®ç•°ï¼Œæ‰€æœ‰åœ˜éšŠåŒ…æ‹¬ä¸”ä¸é™æ–¼å‰ç«¯ ã€å…¶å®ƒå¾Œç«¯(AI å°ˆé•·æˆ–æ˜¯åœ–åƒå°ˆé•·)ã€æ¸¬è©¦ã€ç”¢å“èˆ‡ DevOps å…¨éƒ¨éƒ½æœƒå—åˆ°å½±éŸ¿ï¼Œæ‰€ä»¥ä½œç‚º API é–‹ç™¼çš„æ˜ç¢ºæŒ‡å¼•ï¼Œç¢ºä¿æä¾›çš„è³‡æ–™æ ¼å¼ã€è·¯å¾‘ã€éŒ¯èª¤ç¢¼éƒ½ç¬¦åˆç´„å®šã€‚

**æ¸¬è©¦åœ˜éšŠ (Test Team / QA)** éœ€è¦æ ¹æ“šå¥‘ç´„ä¸­çš„è«‹æ±‚/å›æ‡‰æ ¼å¼ã€HTTP ç‹€æ…‹ç¢¼å’ŒéŒ¯èª¤å®šç¾©ï¼Œä¾†æ’°å¯«è‡ªå‹•åŒ–æ¸¬è©¦é©—è­‰æ¨™æº–ï¼ˆä¾‹å¦‚ï¼šsmoking testï¼‰é©—è­‰ API çš„å¯¦éš›è¡Œç‚ºæ˜¯å¦èˆ‡å¥‘ç´„æè¿°çš„å®Œå…¨ä¸€è‡´ - **å¥‘ç´„æ˜¯æ’°å¯«æ¸¬è©¦æ¡ˆä¾‹çš„é»ƒé‡‘æ¨™æº–**ã€‚

**ç”¢å“åœ˜éšŠ (Product Team / PM)** æ˜¯éœ€æ±‚çš„ã€Œå®šç¾©è€…ã€ï¼Œå¥‘ç´„æ–‡ä»¶å¹«åŠ©ä»–å€‘ç¢ºèªæŠ€è¡“å¯¦ç¾æ˜¯å¦ç¬¦åˆæ¥­å‹™éœ€æ±‚ã€‚é›–ç„¶ä»–å€‘ä¸çœ‹ç¨‹å¼ç¢¼ï¼Œä½†å¯ä»¥é€é OpenAPI (Swagger) æ–‡ä»¶é€™ç¨®è¦–è¦ºåŒ–çš„å¥‘ç´„ä¾†äº†è§£ API åŠŸèƒ½ä¸¦ç¢ºèª API æä¾›çš„æ¬„ä½æ˜¯å¦æ»¿è¶³å‰ç«¯ç•«é¢çš„éœ€æ±‚ï¼Œé¿å…åŠŸèƒ½éºæ¼ã€‚

**DevOps / SRE åœ˜éšŠ** å¥‘ç´„æ–‡ä»¶èƒ½å¤ å¹«åŠ©ä»–å€‘ç†è§£ç³»çµ±é–“çš„äº’å‹•ï¼Œäº†è§£æœå‹™ä¹‹é–“çš„é€šè¨Šå”å®š (HTTP/gRPC)ï¼Œä»¥é…ç½®æ­£ç¢ºçš„ç¶²è·¯è¦å‰‡å’Œç›£æ§ï¼Œç‰¹åˆ¥æ˜¯åœ¨ç™¼ç”Ÿå•é¡Œæ™‚ï¼Œå¯ä»¥æ ¹æ“šå¥‘ç´„å¿«é€Ÿå®šä½æ˜¯å“ªå€‹æœå‹™çš„æºé€šç’°ç¯€å‡ºäº†å•é¡Œã€‚

#### å¯¦ä½œç¯„ä¾‹

```yaml
openapi: 3.0.3
info:
  title: Shared Contract Library
  description: Common reusable components for API contracts
  version: 1.0.0

components:
  # =================
  # Common Parameters
  # =================
  parameters:
    PageNumber:
      name: page
      in: query
      description: Page number
      required: true
      schema:
        type: integer
        minimum: 1

    PageSize:
      name: pageSize
      in: query
      description: Number of items per page
      required: true
      schema:
        type: integer
        minimum: 1
        maximum: 100

    SortColumn:
      name: sortColumn
      in: query
      description: Sort column
      required: false
      schema:
        type: string
        default: id

    SortOrder:
      name: orderType
      in: query
      description: Sort order
      required: false
      schema:
        type: integer
        format: int32
        enum:
          - 0 # Ascending
          - 1 # Descending
        default: 0

    StartDate:
      name: startDate
      in: query
      description: Start date filter
      required: false
      schema:
        type: string
        format: date

    EndDate:
      name: endDate
      in: query
      description: End date filter
      required: false
      schema:
        type: string
        format: date

    EntityId:
      name: id
      in: path
      description: Entity ID
      required: true
      schema:
        type: string

  # =================
  # Common Responses
  # =================
  responses:
    Success:
      description: Operation successful
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/BaseResponse"

    Created:
      description: Resource created successfully
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/BaseResponse"
              - type: object
                properties:
                  id:
                    type: integer
                    description: The ID of the newly created resource

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    BadRequest:
      description: Invalid input
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    ValidationError:
      description: Validation failed
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ValidationErrorResponse"

  # =================
  # Common Schemas
  # =================
  schemas:
    # Base Response Structure
    BaseResponse:
      type: object
      required:
        - isSuccess
        - message
      properties:
        isSuccess:
          type: boolean
          description: Indicates if the operation was successful
        message:
          type: string
          description: Response message
        errors:
          type: object
          nullable: true
          default: null
          description: Error details if any

    # Error Response
    ErrorResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            isSuccess:
              enum: [false]

    # Validation Error Response
    ValidationErrorResponse:
      allOf:
        - $ref: "#/components/schemas/BaseResponse"
        - type: object
          properties:
            isSuccess:
              enum: [false]
            errors:
              type: object
              additionalProperties:
                type: array
                items:
                  type: string

    # Common Status Enum
    EntityStatus:
      type: integer
      format: int32
      enum:
        - 0 # Draft/Template
        - 1 # Pending Review
        - 2 # Approved/Active
        - 3 # Rejected
        - 4 # Processing/Executing
        - 5 # Completed/Executed
        - 6 # Disabled/Inactive
      description: |
        Standard entity status codes:
        - 0: Draft/Template
        - 1: Pending Review
        - 2: Approved/Active
        - 3: Rejected
        - 4: Processing/Executing
        - 5: Completed/Executed
        - 6: Disabled/Inactive

    # Date Range Filter
    DateRangeFilter:
      type: object
      properties:
        startDate:
          type: string
          format: date
          description: Filter start date
        endDate:
          type: string
          format: date
          description: Filter end date

    # Basic Entity Properties
    BaseEntity:
      type: object
      required:
        - id
      properties:
        id:
          type: integer
          description: Unique identifier
        status:
          $ref: "#/components/schemas/EntityStatus"

  # =================
  # Common Examples
  # =================
  examples:
    SuccessResponse:
      summary: Successful operation
      value:
        isSuccess: true
        message: "Operation completed successfully"
        errors: null

    ErrorResponse:
      summary: Error response
      value:
        isSuccess: false
        message: "Operation failed"
        errors:
          general: ["An error occurred"]

    PaginatedResponse:
      summary: Paginated list response
      value:
        isSuccess: true
        message: "Data retrieved successfully"
        errors: null
        result:
          page: 1
          totalCount: 100
          datas: []

    SelectOptions:
      summary: Select options list
      value:
        isSuccess: true
        message: "Options retrieved successfully"
        errors: null
        element:
          - id: "0"
            text: "Active"
            disabled: false
          - id: "1"
            text: "Inactive"
            disabled: false
```

```markdown
# å…±ç”¨å¥‘ç´„ç¯„ä¾‹ï¼šå¹³å° API v1

**æ–‡ä»¶ç›®çš„**ï¼šæ­¤å¥‘ç´„å®šç¾©äº†é›»å•†å¹³å° API v1 çš„é€šç”¨è¦ç¯„èˆ‡æ ¸å¿ƒç«¯é» (`Product`) çš„äº’å‹•æ–¹å¼ï¼Œä½œç‚ºå‰ç«¯ã€å¾Œç«¯ã€æ¸¬è©¦èˆ‡ç”¢å“åœ˜éšŠçš„å…±åŒå”ä½œä¾æ“šã€‚

---

### 1. é€šè¨Šå”å®šç´„å®š (Communication Protocol)

- **å”å®š**: æ‰€æœ‰ API å‡é€é `HTTPS` æä¾›æœå‹™ã€‚
- **åŸºç¤è·¯å¾‘ (Base URL)**: `https://api.your-ecommerce.com/v1`
- **èªè­‰ (Authentication)**: æ‰€æœ‰éœ€è¦æˆæ¬Šçš„è«‹æ±‚ï¼Œéƒ½å¿…é ˆåœ¨ HTTP Header ä¸­å¸¶ä¸Š `Authorization` æ¬„ä½ï¼Œå…¶å€¼ç‚º `Bearer <YOUR_API_TOKEN>`ã€‚
- **è«‹æ±‚èˆ‡å›æ‡‰æ ¼å¼**: æ‰€æœ‰è«‹æ±‚èˆ‡å›æ‡‰çš„ `body` å‡ä½¿ç”¨ `application/json` æ ¼å¼ã€‚

---

### 2. æ¨™æº–å›æ‡‰æ ¼å¼èˆ‡éŒ¯èª¤è™•ç†ç´„å®š (Standard Response & Error Handling)

ç‚ºäº†è®“æ‰€æœ‰å®¢æˆ¶ç«¯ï¼ˆå‰ç«¯ã€APPï¼‰èƒ½ç”¨çµ±ä¸€çš„æ–¹å¼è™•ç† API å›æ‡‰ï¼Œæˆ‘å€‘å®šç¾©ä¸€å€‹æ¨™æº–çš„å›æ‡‰åŒ…è£ (Response Wrapper)ã€‚

#### 2.1. æ¨™æº–å›æ‡‰çµæ§‹ (Standard Response Schema)

æ‰€æœ‰ API å›æ‡‰éƒ½å¿…é ˆéµå¾ªä»¥ä¸‹çµæ§‹ã€‚æˆ‘å€‘å¯ä»¥ä½¿ç”¨ TypeScript Interface ä¾†æ¸…æ™°åœ°å®šç¾©å®ƒï¼š

/\*\*

- æ¨™æº– API å›æ‡‰çš„å…±ç”¨å¥‘ç´„
  \*/
  interface ApiResponse<T> {
  /\*\*
  - è«‹æ±‚æ˜¯å¦æˆåŠŸ
    \*/
    success: boolean;

/\*\*

- æˆåŠŸæ™‚çš„å›æ‡‰è³‡æ–™ (æ³›å‹ T)
- è‹¥è«‹æ±‚å¤±æ•—ï¼Œæ­¤æ¬„ä½ç‚º null
  \*/
  data: T | null;

/\*\*

- å¤±æ•—æ™‚çš„éŒ¯èª¤è³‡è¨Šç‰©ä»¶
- è‹¥è«‹æ±‚æˆåŠŸï¼Œæ­¤æ¬„ä½ç‚º null
  \*/
  error: ApiError | null;
  }

/\*\*

- æ¨™æº–éŒ¯èª¤ç‰©ä»¶çµæ§‹
  \*/
  interface ApiError {
  /\*\*
  - å…§éƒ¨å®šç¾©çš„éŒ¯èª¤ä»£ç¢¼ï¼Œæ–¹ä¾¿å‰ç«¯é€²è¡Œé‚è¼¯åˆ¤æ–·
    \*/
    code: number;

/\*\*

- äººé¡å¯è®€çš„éŒ¯èª¤è¨Šæ¯
  \*/
  message: string;
  }

#### 2.2. é€šç”¨éŒ¯èª¤ä»£ç¢¼ (Common Error Codes)

| HTTP ç‹€æ…‹ç¢¼ | å…§éƒ¨ä»£ç¢¼ (`code`) | èªªæ˜                                   |
| :---------- | :---------------- | :------------------------------------- |
| `400`       | `40001`           | è«‹æ±‚åƒæ•¸é©—è­‰å¤±æ•— (Invalid Parameters)  |
| `401`       | `40101`           | æœªç¶“æˆæ¬Š (Unauthorized)                |
| `403`       | `40301`           | æ¬Šé™ä¸è¶³ (Forbidden)                   |
| `404`       | `40401`           | è«‹æ±‚çš„è³‡æºä¸å­˜åœ¨ (Resource Not Found)  |
| `500`       | `50000`           | ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤ (Internal Server Error) |

---

### 3. å…·é«”ç«¯é»å¥‘ç´„ï¼šå–å¾—å•†å“è³‡è¨Š

ç¾åœ¨ï¼Œæˆ‘å€‘å°‡ä¸Šè¿°é€šç”¨ç´„å®šæ‡‰ç”¨åˆ°ä¸€å€‹å…·é«”çš„ç«¯é»ä¸Šã€‚

**ç«¯é»**: `GET /products/{productId}`

**æè¿°**: æ ¹æ“šæä¾›çš„ `productId` å–å¾—å–®ä¸€å•†å“çš„è©³ç´°è³‡è¨Šã€‚

#### 3.1. è«‹æ±‚ (Request)

- **è·¯å¾‘åƒæ•¸ (Path Parameter)**:
  - `productId` (string, format: uuid): å•†å“çš„å”¯ä¸€è­˜åˆ¥ç¢¼ã€‚

#### 3.2. å›æ‡‰ (Responses)

- **è³‡æ–™æ ¼å¼ç´„å®š (Data Schema)**: é¦–å…ˆå®šç¾© `Product` ç‰©ä»¶çš„å¥‘ç´„ã€‚

  // å•†å“ç‰©ä»¶çš„å…±ç”¨å¥‘ç´„
  interface Product {
  id: string; // UUID
  name: string;
  description: string;
  price: number;
  currency: 'TWD' | 'USD';
  stock: number;
  imageUrl: string;
  createdAt: string; // ISO 8601 format date string
  }

- **æˆåŠŸå›æ‡‰ (200 OK)**:
  ç•¶å•†å“æˆåŠŸæ‰¾åˆ°æ™‚ï¼ŒHTTP ç‹€æ…‹ç¢¼ç‚º `200`ï¼Œå›æ‡‰ `body` éµå¾ª `ApiResponse<Product>` çµæ§‹ã€‚

json
// Response Body (200 OK)
{
"success": true,
"data": {
"id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
"name": "é«˜æ•ˆèƒ½ç„¡ç·šæ©Ÿæ¢°éµç›¤",
"description": "æä¾›æ¥µè‡´çš„æ‰“å­—é«”é©—èˆ‡ RGB ç‡ˆæ•ˆã€‚",
"price": 3200,
"currency": "TWD",
"stock": 150,
"imageUrl": "https://cdn.your-ecommerce.com/images/keyboard.jpg",
"createdAt": "2025-09-18T10:00:00Z"
},
"error": null
}

- **å¤±æ•—å›æ‡‰ (404 Not Found)**:
  ç•¶ `productId` å°æ‡‰çš„å•†å“ä¸å­˜åœ¨æ™‚ï¼ŒHTTP ç‹€æ…‹ç¢¼ç‚º `404`ï¼Œå›æ‡‰ `body` éµå¾ª `ApiResponse<null>` çµæ§‹ã€‚

json
// Response Body (404 Not Found)
{
"success": false,
"data": null,
"error": {
"code": 40401,
"message": "å•†å“ä¸å­˜åœ¨"
}
}

- **å¤±æ•—å›æ‡‰ (400 Bad Request)**:
  ç•¶ `productId` æ ¼å¼ä¸æ­£ç¢ºï¼ˆä¸æ˜¯æœ‰æ•ˆçš„ UUIDï¼‰æ™‚ï¼ŒHTTP ç‹€æ…‹ç¢¼ç‚º `400`ã€‚

json
// Response Body (400 Bad Request)
{
"success": false,
"data": null,
"error": {
"code": 40001,
"message": "è«‹æ±‚åƒæ•¸é©—è­‰å¤±æ•—: productId å¿…é ˆæ˜¯æœ‰æ•ˆçš„ UUID æ ¼å¼"
}
}

---

### å¦‚ä½•ä½¿ç”¨é€™ä»½å¥‘ç´„

- **å¾Œç«¯åœ˜éšŠ**ï¼šä»¥æ­¤ç‚ºè¦æ ¼æ›¸ï¼Œå¯¦ä½œ `GET /products/{productId}` ç«¯é»ï¼Œç¢ºä¿å›å‚³çš„ JSON çµæ§‹å®Œå…¨ç¬¦åˆå¥‘ç´„ã€‚
- **å‰ç«¯åœ˜éšŠ**ï¼šåœ¨å¾Œç«¯é‚„åœ¨é–‹ç™¼æ™‚ï¼Œå°±å¯ä»¥æ ¹æ“šé€™ä»½å¥‘ç´„å»ºç«‹ `Product` çš„ TypeScript å‹åˆ¥ï¼Œä¸¦ä½¿ç”¨ Mock Server æ¨¡æ“¬æˆåŠŸå’Œå¤±æ•—çš„å›æ‡‰ä¾†é–‹ç™¼å•†å“è©³æƒ…é é¢ã€‚
- **æ¸¬è©¦åœ˜éšŠ**ï¼šæ’°å¯«è‡ªå‹•åŒ–æ¸¬è©¦æ¡ˆä¾‹ï¼Œåˆ†åˆ¥é©—è­‰ 200, 404, 400 ç­‰æƒ…å¢ƒä¸‹çš„å›æ‡‰æ˜¯å¦èˆ‡å¥‘ç´„ä¸€è‡´ã€‚
```

### 2. ç³»çµ±äº¤äº’ä»‹é¢(OpenAPI)

**æŠ½è±¡æ¦‚å¿µ**ï¼šAPI çš„ã€Œæ¨™æº–åŒ–åˆç´„ã€

```
OpenAPI (Swagger) = API çš„èº«åˆ†è­‰ + ä½¿ç”¨æ‰‹å†Š + è‡ªå‹•åŒ–å·¥å…·
- å®šç¾©è¼¸å…¥æ ¼å¼ â†’ ä½ éœ€è¦æä¾›ä»€éº¼è³‡æ–™
- å®šç¾©è¼¸å‡ºæ ¼å¼ â†’ ä½ æœƒå¾—åˆ°ä»€éº¼å›æ‡‰
- å®šç¾©éŒ¯èª¤è™•ç† â†’ å‡ºéŒ¯æ™‚æœƒç™¼ç”Ÿä»€éº¼
- è‡ªå‹•ç”Ÿæˆæ–‡ä»¶ â†’ åœ˜éšŠå”ä½œçš„å¯è¦–åŒ–ç•Œé¢
- ç¨‹å¼ç¢¼ç”Ÿæˆ â†’ æ¸›å°‘é‡è¤‡å·¥ä½œ
```

OpenAPIï¼ˆå‰èº«ç‚º Swaggerï¼‰æ˜¯ç¾ä»£ API é–‹ç™¼ä¸­æœ€é‡è¦çš„æ¨™æº–ä¹‹ä¸€ã€‚å®ƒä¸åƒ…åƒ…æ˜¯ä¸€ä»½æ–‡ä»¶ï¼Œæ›´æ˜¯æ•´å€‹ API ç”Ÿå‘½é€±æœŸçš„æ ¸å¿ƒå·¥å…·ã€‚æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœå…±ç”¨å¥‘ç´„æ˜¯å»ºç¯‰çš„ã€Œææ–™è¦æ ¼æ›¸ã€ï¼Œé‚£éº¼ OpenAPI å°±æ˜¯å®Œæ•´çš„ã€Œå»ºç¯‰è—åœ–ã€ï¼Œè©³ç´°æè¿°æ¯å€‹æˆ¿é–“çš„ä½ˆå±€ã€é–€çª—ä½ç½®ã€é›»è·¯é…ç½®ç­‰æ‰€æœ‰ç´°ç¯€ã€‚

#### 2.1 ç‚ºä»€éº¼éœ€è¦ OpenAPIï¼Ÿ

åœ¨æ²’æœ‰ OpenAPI ä¹‹å‰ï¼ŒAPI é–‹ç™¼å¸¸å¸¸é¢è‡¨ä»¥ä¸‹å›°å¢ƒï¼š

**æƒ…å¢ƒé‡ç¾ï¼šAPI é–‹ç™¼çš„æ··äº‚æ™‚ä»£**

```
å¾Œç«¯å·¥ç¨‹å¸«ï¼šã€Œæˆ‘åšå¥½ API äº†ï¼ã€
å‰ç«¯å·¥ç¨‹å¸«ï¼šã€Œè¦æ€éº¼å‘¼å«ï¼Ÿåƒæ•¸æ˜¯ä»€éº¼ï¼Ÿã€
å¾Œç«¯å·¥ç¨‹å¸«ï¼šã€Œä½ çœ‹ä¸€ä¸‹ç¨‹å¼ç¢¼å°±çŸ¥é“äº†...ã€
å‰ç«¯å·¥ç¨‹å¸«ï¼šã€Œæˆ‘ä¸æœƒçœ‹å¾Œç«¯ç¨‹å¼ç¢¼å•Šï¼ã€
æ¸¬è©¦å·¥ç¨‹å¸«ï¼šã€Œæˆ‘è¦æ€éº¼æ¸¬è©¦ï¼Ÿæœ‰æ–‡ä»¶å—ï¼Ÿã€
ç”¢å“ç¶“ç†ï¼šã€Œé€™å€‹ API åˆ°åº•æœ‰ä»€éº¼åŠŸèƒ½ï¼Ÿã€
```

é€™ç¨®å ´æ™¯æ˜¯å¦ä¼¼æ›¾ç›¸è­˜ï¼ŸOpenAPI çš„å‡ºç¾å°±æ˜¯ç‚ºäº†è§£æ±ºé€™äº›æºé€šèˆ‡å”ä½œå•é¡Œã€‚

#### 2.2 OpenAPI çš„äº”å¤§æ ¸å¿ƒåƒ¹å€¼

**1. æ–‡ä»¶å³ç¨‹å¼ç¢¼ (Documentation as Code)**

å‚³çµ±çš„ API æ–‡ä»¶å®¹æ˜“éæ™‚ï¼Œå› ç‚ºç¨‹å¼ç¢¼æ›´æ–°å¾Œï¼Œé–‹ç™¼è€…å¾€å¾€å¿˜è¨˜åŒæ­¥æ›´æ–°æ–‡ä»¶ã€‚OpenAPI è®“æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼ç·Šå¯†çµåˆï¼Œç•¶ API è®Šæ›´æ™‚ï¼Œæ–‡ä»¶ä¹Ÿæœƒè‡ªå‹•åŒæ­¥æ›´æ–°ã€‚

```yaml
# é€™ä¸åªæ˜¯æ–‡ä»¶ï¼Œé‚„æ˜¯å¯åŸ·è¡Œçš„è¦æ ¼
paths:
  /users/{userId}:
    get:
      summary: å–å¾—ä½¿ç”¨è€…è³‡è¨Š
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: æˆåŠŸå–å¾—ä½¿ç”¨è€…è³‡è¨Š
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
```

**2. å¥‘ç´„å„ªå…ˆé–‹ç™¼ (Contract-First Development)**

OpenAPI æ”¯æ´ã€Œå¥‘ç´„å„ªå…ˆã€çš„é–‹ç™¼æ¨¡å¼ï¼Œè®“å‰å¾Œç«¯åœ˜éšŠå¯ä»¥å…ˆå®šç¾© API å¥‘ç´„ï¼Œç„¶å¾Œå„è‡ªæ ¹æ“šå¥‘ç´„é€²è¡Œé–‹ç™¼ã€‚

```
å‚³çµ±é–‹ç™¼æµç¨‹ï¼š
å¾Œç«¯å®Œæˆ â†’ å‰ç«¯é–‹å§‹ â†’ ç™¼ç¾å•é¡Œ â†’ ä¾†å›ä¿®æ”¹

å¥‘ç´„å„ªå…ˆæµç¨‹ï¼š
å®šç¾©å¥‘ç´„ â†’ å‰å¾Œç«¯ä¸¦è¡Œé–‹ç™¼ â†’ é›†æˆæ¸¬è©¦ â†’ å¿«é€Ÿäº¤ä»˜
```

**3. è‡ªå‹•åŒ–å·¥å…·ç”Ÿæ…‹ç³»çµ±**

OpenAPI æ“æœ‰è±å¯Œçš„å·¥å…·ç”Ÿæ…‹ç³»çµ±ï¼Œå¯ä»¥è‡ªå‹•åŒ–è¨±å¤šé‡è¤‡æ€§å·¥ä½œï¼š

- **ç¨‹å¼ç¢¼ç”Ÿæˆ**ï¼šè‡ªå‹•ç”Ÿæˆå‰ç«¯ SDKã€å¾Œç«¯ stub ç¨‹å¼ç¢¼
- **æ¸¬è©¦å·¥å…·**ï¼šè‡ªå‹•ç”Ÿæˆ API æ¸¬è©¦æ¡ˆä¾‹
- **æ–‡ä»¶ç¶²ç«™**ï¼šè‡ªå‹•ç”¢ç”Ÿç¾è§€çš„äº’å‹•å¼æ–‡ä»¶
- **æ¨¡æ“¬æœå‹™**ï¼šå¿«é€Ÿå»ºç«‹ Mock Server

#### 2.3 OpenAPI æ–‡ä»¶çµæ§‹æ·±åº¦è§£æ

ä¸€å€‹å®Œæ•´çš„ OpenAPI æ–‡ä»¶åŒ…å«ä»¥ä¸‹æ ¸å¿ƒå…ƒç´ ï¼š

**åŸºæœ¬è³‡è¨Šå€å¡Š (Info Object)**

```yaml
openapi: 3.0.3
info:
  title: é›»å•†å¹³å° API
  description: |
    æä¾›å®Œæ•´çš„é›»å•†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å•†å“ç®¡ç†ã€è¨‚å–®è™•ç†ã€ä½¿ç”¨è€…ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

    ## èªè­‰æ–¹å¼
    ä½¿ç”¨ Bearer Token é€²è¡Œèªè­‰ï¼Œè«‹åœ¨ Authorization Header ä¸­åŒ…å«æ‚¨çš„ API Tokenã€‚

    ## é™åˆ¶é€Ÿç‡
    æ¯å€‹ API Token æ¯åˆ†é˜æœ€å¤šå¯ç™¼é€ 1000 æ¬¡è«‹æ±‚ã€‚

  version: 2.1.0
  contact:
    name: API æ”¯æ´åœ˜éšŠ
    email: api-support@yourcompany.com
    url: https://docs.yourcompany.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
```

**ä¼ºæœå™¨è¨­å®š (Servers)**

```yaml
servers:
  - url: https://api.yourcompany.com/v2
    description: æ­£å¼ç’°å¢ƒ
  - url: https://staging-api.yourcompany.com/v2
    description: æ¸¬è©¦ç’°å¢ƒ
  - url: http://localhost:3000/v2
    description: æœ¬åœ°é–‹ç™¼ç’°å¢ƒ
```

**è·¯å¾‘èˆ‡æ“ä½œ (Paths & Operations)**

```yaml
paths:
  /products:
    get:
      tags:
        - å•†å“ç®¡ç†
      summary: å–å¾—å•†å“åˆ—è¡¨
      description: |
        å–å¾—å•†å“åˆ—è¡¨ï¼Œæ”¯æ´åˆ†é ã€ç¯©é¸å’Œæ’åºåŠŸèƒ½ã€‚

        ### ä½¿ç”¨ç¯„ä¾‹
        - å–å¾—ç¬¬ä¸€é å•†å“ï¼š`GET /products?page=1&limit=20`
        - æœå°‹ç‰¹å®šå•†å“ï¼š`GET /products?search=iPhone`
        - åƒ¹æ ¼ç¯„åœç¯©é¸ï¼š`GET /products?minPrice=1000&maxPrice=5000`
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: search
          in: query
          description: å•†å“åç¨±æˆ–æè¿°çš„é—œéµå­—æœå°‹
          schema:
            type: string
            example: "iPhone 14"
        - name: category
          in: query
          description: å•†å“åˆ†é¡ç¯©é¸
          schema:
            type: string
            enum: [electronics, clothing, books, home]
        - name: minPrice
          in: query
          description: æœ€ä½åƒ¹æ ¼
          schema:
            type: number
            minimum: 0
        - name: maxPrice
          in: query
          description: æœ€é«˜åƒ¹æ ¼
          schema:
            type: number
            minimum: 0
      responses:
        "200":
          description: æˆåŠŸå–å¾—å•†å“åˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      products:
                        type: array
                        items:
                          $ref: "#/components/schemas/Product"
                      pagination:
                        $ref: "#/components/schemas/Pagination"
                  error:
                    type: object
                    nullable: true
                    example: null
              examples:
                æˆåŠŸç¯„ä¾‹:
                  summary: æ­£å¸¸å›æ‡‰ç¯„ä¾‹
                  value:
                    success: true
                    data:
                      products:
                        - id: "prod-001"
                          name: "iPhone 14 Pro"
                          price: 32900
                          category: "electronics"
                      pagination:
                        page: 1
                        limit: 20
                        total: 156
                        totalPages: 8
                    error: null
        "400":
          $ref: "#/components/responses/BadRequest"
        "500":
          $ref: "#/components/responses/InternalServerError"
```

**è³‡æ–™æ¨¡å‹å®šç¾© (Components/Schemas)**

```yaml
components:
  schemas:
    Product:
      type: object
      required:
        - id
        - name
        - price
        - category
      properties:
        id:
          type: string
          description: å•†å“å”¯ä¸€è­˜åˆ¥ç¢¼
          example: "prod-001"
        name:
          type: string
          description: å•†å“åç¨±
          minLength: 1
          maxLength: 200
          example: "iPhone 14 Pro"
        description:
          type: string
          description: å•†å“æè¿°
          maxLength: 2000
          example: "Apple æœ€æ–°æ——è‰¦æ‰‹æ©Ÿï¼Œé…å‚™ A16 Bionic æ™¶ç‰‡"
        price:
          type: number
          description: å•†å“åƒ¹æ ¼ï¼ˆæ–°å°å¹£ï¼‰
          minimum: 0
          example: 32900
        originalPrice:
          type: number
          description: åŸå§‹åƒ¹æ ¼ï¼ˆç”¨æ–¼é¡¯ç¤ºæŠ˜æ‰£ï¼‰
          minimum: 0
          example: 36900
        category:
          type: string
          description: å•†å“åˆ†é¡
          enum: [electronics, clothing, books, home]
          example: "electronics"
        images:
          type: array
          description: å•†å“åœ–ç‰‡ URL åˆ—è¡¨
          items:
            type: string
            format: uri
          example:
            - "https://cdn.example.com/images/iphone14-1.jpg"
            - "https://cdn.example.com/images/iphone14-2.jpg"
        stock:
          type: integer
          description: åº«å­˜æ•¸é‡
          minimum: 0
          example: 50
        isActive:
          type: boolean
          description: å•†å“æ˜¯å¦å•Ÿç”¨
          example: true
        createdAt:
          type: string
          format: date-time
          description: å»ºç«‹æ™‚é–“
          example: "2024-01-15T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: æœ€å¾Œæ›´æ–°æ™‚é–“
          example: "2024-01-20T14:45:00Z"

    Pagination:
      type: object
      required:
        - page
        - limit
        - total
        - totalPages
      properties:
        page:
          type: integer
          description: ç›®å‰é æ•¸
          minimum: 1
          example: 1
        limit:
          type: integer
          description: æ¯é ç­†æ•¸
          minimum: 1
          maximum: 100
          example: 20
        total:
          type: integer
          description: ç¸½ç­†æ•¸
          minimum: 0
          example: 156
        totalPages:
          type: integer
          description: ç¸½é æ•¸
          minimum: 0
          example: 8
```

#### 2.4 é€²éš OpenAPI ç‰¹æ€§

**1. å®‰å…¨æ€§å®šç¾© (Security Schemes)**

```yaml
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        ä½¿ç”¨ JWT Token é€²è¡Œèªè­‰ã€‚è«‹åœ¨ Authorization Header ä¸­æä¾› Bearer Tokenã€‚

        ç¯„ä¾‹ï¼š`Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: |
        ä½¿ç”¨ API Key é€²è¡Œèªè­‰ã€‚è«‹åœ¨ X-API-Key Header ä¸­æä¾›æ‚¨çš„ API Keyã€‚

# æ‡‰ç”¨åˆ°ç‰¹å®šç«¯é»
paths:
  /products:
    get:
      security: [] # å…¬é–‹ç«¯é»ï¼Œä¸éœ€è¦èªè­‰
    post:
      security:
        - BearerAuth: [] # éœ€è¦ Bearer Token
  /admin/users:
    get:
      security:
        - BearerAuth: []
        - ApiKeyAuth: [] # åŒæ™‚æ”¯æ´å…©ç¨®èªè­‰æ–¹å¼
```

**2. å¯é‡è¤‡ä½¿ç”¨çš„å…ƒä»¶ (Reusable Components)**

```yaml
components:
  parameters:
    PageParam:
      name: page
      in: query
      description: é æ•¸
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1

    LimitParam:
      name: limit
      in: query
      description: æ¯é ç­†æ•¸
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

  responses:
    BadRequest:
      description: è«‹æ±‚åƒæ•¸éŒ¯èª¤
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            åƒæ•¸é©—è­‰å¤±æ•—:
              summary: åƒæ•¸æ ¼å¼ä¸æ­£ç¢º
              value:
                success: false
                data: null
                error:
                  code: 400001
                  message: "åƒæ•¸é©—è­‰å¤±æ•—"
                  details:
                    - field: "price"
                      message: "price å¿…é ˆæ˜¯æ­£æ•¸"

    InternalServerError:
      description: ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            ä¼ºæœå™¨éŒ¯èª¤:
              summary: ç³»çµ±å…§éƒ¨éŒ¯èª¤
              value:
                success: false
                data: null
                error:
                  code: 500001
                  message: "ç³»çµ±æš«æ™‚ç„¡æ³•è™•ç†è«‹æ±‚ï¼Œè«‹ç¨å¾Œå†è©¦"
```

**3. å›èª¿å’Œ Webhooks (Callbacks & Webhooks)**

```yaml
paths:
  /orders:
    post:
      summary: å»ºç«‹è¨‚å–®
      callbacks:
        orderStatusChanged:
          "{$request.body#/webhookUrl}":
            post:
              summary: è¨‚å–®ç‹€æ…‹è®Šæ›´é€šçŸ¥
              requestBody:
                content:
                  application/json:
                    schema:
                      type: object
                      properties:
                        orderId:
                          type: string
                        status:
                          type: string
                          enum: [pending, paid, shipped, delivered, cancelled]
                        timestamp:
                          type: string
                          format: date-time
```

#### 2.5 åœ˜éšŠå”ä½œä¸­çš„ OpenAPI æœ€ä½³å¯¦å‹™

**1. ç‰ˆæœ¬ç®¡ç†ç­–ç•¥**

```yaml
# èªç¾©åŒ–ç‰ˆæœ¬æ§åˆ¶
info:
  version: 2.1.0 # ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è¨‚ç‰ˆæœ¬

# URL ç‰ˆæœ¬æ§åˆ¶
servers:
  - url: https://api.example.com/v2

# Header ç‰ˆæœ¬æ§åˆ¶ï¼ˆé€²éšï¼‰
components:
  parameters:
    ApiVersion:
      name: Api-Version
      in: header
      schema:
        type: string
        enum: ["2.0", "2.1"]
        default: "2.1"
```

**2. è®Šæ›´ç®¡ç†æµç¨‹**

```yaml
# ä½¿ç”¨æ¨™ç±¤æ¨™è¨˜ç”Ÿå‘½é€±æœŸç‹€æ…‹
paths:
  /legacy-endpoint:
    get:
      deprecated: true
      summary: èˆŠç‰ˆç«¯é»ï¼ˆå³å°‡æ£„ç”¨ï¼‰
      description: |
        âš ï¸ **æ­¤ç«¯é»å·²æ£„ç”¨**

        è«‹ä½¿ç”¨æ–°çš„ç«¯é»ï¼š`GET /v2/new-endpoint`

        **æ£„ç”¨æ™‚é–“**ï¼š2024-06-01
        **ç§»é™¤æ™‚é–“**ï¼š2024-12-01

  /experimental-feature:
    post:
      tags: [å¯¦é©—æ€§åŠŸèƒ½]
      summary: å¯¦é©—æ€§åŠŸèƒ½ï¼ˆæ¸¬è©¦ä¸­ï¼‰
      description: |
        ğŸ§ª **å¯¦é©—æ€§åŠŸèƒ½**

        æ­¤åŠŸèƒ½æ­£åœ¨æ¸¬è©¦éšæ®µï¼ŒAPI å¯èƒ½æœƒæœ‰è®Šæ›´ã€‚
        ä¸å»ºè­°åœ¨æ­£å¼ç’°å¢ƒä¸­ä½¿ç”¨ã€‚
```

#### 2.6 OpenAPI åœ¨å¯¦éš›åœ˜éšŠå”ä½œä¸­çš„å·¥ä½œæµç¨‹

**æƒ…å¢ƒï¼šé›»å•†å¹³å°æ–°å¢ã€Œå•†å“è©•åƒ¹ç³»çµ±ã€**

è®“æˆ‘å€‘é€éä¸€å€‹å¯¦éš›æ¡ˆä¾‹ä¾†çœ‹ OpenAPI å¦‚ä½•ä¿ƒé€²åœ˜éšŠå”ä½œï¼š

**ç¬¬ä¸€æ­¥ï¼šç”¢å“éœ€æ±‚ç¢ºèª**

```
ç”¢å“ç¶“ç†æå‡ºéœ€æ±‚ï¼š
ã€Œæˆ‘å€‘éœ€è¦ä¸€å€‹å•†å“è©•åƒ¹ç³»çµ±ï¼Œè®“ç”¨æˆ¶å¯ä»¥å°è³¼è²·çš„å•†å“é€²è¡Œè©•åˆ†å’Œç•™è¨€ã€
```

**ç¬¬äºŒæ­¥ï¼šAPI å¥‘ç´„è¨­è¨ˆï¼ˆåœ˜éšŠå”ä½œï¼‰**

```yaml
# ç¬¬ä¸€ç‰ˆå¥‘ç´„è‰ç¨¿ï¼ˆç”±å¾Œç«¯ä¸»å°ï¼Œå‰ç«¯åƒèˆ‡ï¼‰
paths:
  /products/{productId}/reviews:
    post:
      summary: æäº¤å•†å“è©•åƒ¹
      description: |
        ç”¨æˆ¶å°å·²è³¼è²·çš„å•†å“æäº¤è©•åƒ¹ã€‚

        **æ¥­å‹™è¦å‰‡**ï¼š
        - åªæœ‰è³¼è²·éæ­¤å•†å“çš„ç”¨æˆ¶æ‰èƒ½è©•åƒ¹
        - æ¯å€‹ç”¨æˆ¶å°åŒä¸€å•†å“åªèƒ½è©•åƒ¹ä¸€æ¬¡
        - è©•åˆ†ç¯„åœï¼š1-5 åˆ†
      parameters:
        - name: productId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - rating
                - comment
              properties:
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                  description: è©•åˆ†ï¼ˆ1-5åˆ†ï¼‰
                comment:
                  type: string
                  minLength: 10
                  maxLength: 500
                  description: è©•åƒ¹å…§å®¹
                images:
                  type: array
                  maxItems: 5
                  items:
                    type: string
                    format: uri
                  description: è©•åƒ¹åœ–ç‰‡ï¼ˆæœ€å¤š5å¼µï¼‰
      responses:
        "201":
          description: è©•åƒ¹æäº¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReviewResponse"
        "400":
          description: åƒæ•¸éŒ¯èª¤
        "403":
          description: æœªè³¼è²·æ­¤å•†å“æˆ–å·²è©•åƒ¹é
        "401":
          description: æœªç™»å…¥
```

**ç¬¬ä¸‰æ­¥ï¼šå‰ç«¯åœ˜éšŠå›é¥‹èˆ‡èª¿æ•´**

```
å‰ç«¯å·¥ç¨‹å¸«ï¼šã€Œæˆ‘éœ€è¦ä¸€å€‹ API ä¾†æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å¯ä»¥è©•åƒ¹é€™å€‹å•†å“ã€
ç”¢å“ç¶“ç†ï¼šã€Œæˆ‘å€‘é‚„éœ€è¦å–å¾—å•†å“çš„æ‰€æœ‰è©•åƒ¹åˆ—è¡¨ã€
æ¸¬è©¦å·¥ç¨‹å¸«ï¼šã€Œéœ€è¦æ˜ç¢ºå®šç¾©åœ–ç‰‡ä¸Šå‚³çš„æ ¼å¼å’Œå¤§å°é™åˆ¶ã€
```

**ç¬¬å››æ­¥ï¼šå¥‘ç´„è¿­ä»£å„ªåŒ–**

```yaml
# ç¬¬äºŒç‰ˆå¥‘ç´„ï¼ˆæ•´åˆåœ˜éšŠå›é¥‹ï¼‰
paths:
  # æª¢æŸ¥è©•åƒ¹æ¬Šé™
  /products/{productId}/reviews/check-permission:
    get:
      summary: æª¢æŸ¥ç”¨æˆ¶è©•åƒ¹æ¬Šé™
      description: æª¢æŸ¥ç•¶å‰ç”¨æˆ¶æ˜¯å¦å¯ä»¥å°æ­¤å•†å“é€²è¡Œè©•åƒ¹
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  canReview:
                    type: boolean
                  reason:
                    type: string
                    enum: [not_purchased, already_reviewed, pending_delivery]

  # å–å¾—è©•åƒ¹åˆ—è¡¨
  /products/{productId}/reviews:
    get:
      summary: å–å¾—å•†å“è©•åƒ¹åˆ—è¡¨
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/LimitParam"
        - name: rating
          in: query
          description: æŒ‰è©•åˆ†ç¯©é¸
          schema:
            type: integer
            minimum: 1
            maximum: 5
        - name: sort
          in: query
          description: æ’åºæ–¹å¼
          schema:
            type: string
            enum: [latest, oldest, highest_rating, lowest_rating]
            default: latest
      responses:
        "200":
          description: æˆåŠŸå–å¾—è©•åƒ¹åˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      reviews:
                        type: array
                        items:
                          $ref: "#/components/schemas/Review"
                      pagination:
                        $ref: "#/components/schemas/Pagination"
                      statistics:
                        $ref: "#/components/schemas/ReviewStatistics"

components:
  schemas:
    Review:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        userName:
          type: string
        userAvatar:
          type: string
          format: uri
        rating:
          type: integer
          minimum: 1
          maximum: 5
        comment:
          type: string
        images:
          type: array
          items:
            type: string
            format: uri
        createdAt:
          type: string
          format: date-time
        isVerifiedPurchase:
          type: boolean
          description: æ˜¯å¦ç‚ºé©—è­‰è³¼è²·
        helpfulCount:
          type: integer
          description: æœ‰ç”¨è©•åƒ¹æ•¸

    ReviewStatistics:
      type: object
      properties:
        averageRating:
          type: number
          format: float
          example: 4.2
        totalReviews:
          type: integer
          example: 156
        ratingDistribution:
          type: object
          properties:
            "5":
              type: integer
              example: 89
            "4":
              type: integer
              example: 42
            "3":
              type: integer
              example: 15
            "2":
              type: integer
              example: 7
            "1":
              type: integer
              example: 3
```

#### 2.7 OpenAPI æœ€ä½³å¯¦å‹™æŒ‡å—

**1. å¥‘ç´„è¨­è¨ˆåŸå‰‡**

```yaml
# âœ… å¥½çš„åšæ³•ï¼šè©³ç´°ä¸”æ˜ç¢ºçš„æè¿°
/users/{userId}/orders:
  get:
    summary: å–å¾—ç”¨æˆ¶è¨‚å–®åˆ—è¡¨
    description: |
      å–å¾—æŒ‡å®šç”¨æˆ¶çš„è¨‚å–®åˆ—è¡¨ï¼Œæ”¯æ´å¤šç¨®ç¯©é¸æ¢ä»¶ã€‚

      **æ¬Šé™è¦æ±‚**ï¼š
      - ç”¨æˆ¶åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è¨‚å–®
      - ç®¡ç†å“¡å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶çš„è¨‚å–®

      **åˆ†é èªªæ˜**ï¼š
      - é è¨­æ¯é  20 ç­†
      - æœ€å¤§æ¯é  100 ç­†
      - æŒ‰è¨‚å–®å»ºç«‹æ™‚é–“å€’åºæ’åˆ—
    parameters:
      - name: status
        in: query
        description: |
          è¨‚å–®ç‹€æ…‹ç¯©é¸ï¼Œå¯ä»¥æŒ‡å®šå¤šå€‹ç‹€æ…‹ã€‚

          ç¯„ä¾‹ï¼š
          - å–®ä¸€ç‹€æ…‹ï¼š`?status=paid`
          - å¤šé‡ç‹€æ…‹ï¼š`?status=paid,shipped`
        schema:
          type: array
          items:
            type: string
            enum: [pending, paid, shipped, delivered, cancelled, refunded]
        style: form
        explode: false

# âŒ ä¸å¥½çš„åšæ³•ï¼šæè¿°ä¸æ¸…æ¥š
/users/{userId}/orders:
  get:
    summary: å–å¾—è¨‚å–®
    parameters:
      - name: status
        in: query
        schema:
          type: string
```

**2. éŒ¯èª¤è™•ç†æ¨™æº–åŒ–**

```yaml
components:
  schemas:
    # çµ±ä¸€çš„éŒ¯èª¤å›æ‡‰æ ¼å¼
    StandardError:
      type: object
      required:
        - success
        - error
      properties:
        success:
          type: boolean
          enum: [false]
        data:
          type: object
          nullable: true
          example: null
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: æ©Ÿå™¨å¯è®€çš„éŒ¯èª¤ä»£ç¢¼
              example: "PRODUCT_NOT_FOUND"
            message:
              type: string
              description: äººé¡å¯è®€çš„éŒ¯èª¤è¨Šæ¯
              example: "æ‰¾ä¸åˆ°æŒ‡å®šçš„å•†å“"
            details:
              type: array
              description: è©³ç´°éŒ¯èª¤è³‡è¨Šï¼ˆé€šå¸¸ç”¨æ–¼é©—è­‰éŒ¯èª¤ï¼‰
              items:
                type: object
                properties:
                  field:
                    type: string
                    example: "email"
                  message:
                    type: string
                    example: "é›»å­éƒµä»¶æ ¼å¼ä¸æ­£ç¢º"
            trace_id:
              type: string
              description: éŒ¯èª¤è¿½è¹¤ IDï¼Œç”¨æ–¼å•é¡Œé™¤éŒ¯
              example: "req_1234567890abcdef"

  responses:
    # å¯é‡ç”¨çš„éŒ¯èª¤å›æ‡‰
    ValidationError:
      description: è¼¸å…¥é©—è­‰å¤±æ•—
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/StandardError"
          examples:
            email_validation:
              summary: é›»å­éƒµä»¶é©—è­‰å¤±æ•—
              value:
                success: false
                data: null
                error:
                  code: "VALIDATION_FAILED"
                  message: "è¼¸å…¥è³‡æ–™é©—è­‰å¤±æ•—"
                  details:
                    - field: "email"
                      message: "é›»å­éƒµä»¶æ ¼å¼ä¸æ­£ç¢º"
                    - field: "password"
                      message: "å¯†ç¢¼é•·åº¦è‡³å°‘éœ€è¦ 8 å€‹å­—å…ƒ"
                  trace_id: "req_1234567890abcdef"
```

**3. ç‰ˆæœ¬æ§åˆ¶èˆ‡å‘å¾Œç›¸å®¹æ€§**

```yaml
# ç¯„ä¾‹ï¼šå¦‚ä½•å„ªé›…åœ°é€²è¡Œ API æ¼”é€²

# v1 ç‰ˆæœ¬ï¼ˆç¾æœ‰ï¼‰
/v1/products/{id}:
  get:
    responses:
      "200":
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                name:
                  type: string
                price:
                  type: number

# v2 ç‰ˆæœ¬ï¼ˆæ–°å¢åŠŸèƒ½ï¼Œä¿æŒå‘å¾Œç›¸å®¹ï¼‰
/v2/products/{id}:
  get:
    responses:
      "200":
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                name:
                  type: string
                price:
                  type: number
                # æ–°å¢æ¬„ä½
                currency:
                  type: string
                  default: "TWD"
                variants:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      price:
                        type: number
                # æ¨™è¨˜ç‚ºæ£„ç”¨ä½†ä»ä¿ç•™
                old_price_field:
                  type: number
                  deprecated: true
                  description: "è«‹ä½¿ç”¨ price æ¬„ä½"
```

#### 2.8 åœ˜éšŠå”ä½œå¯¦æˆ°æ¡ˆä¾‹

**æ¡ˆä¾‹èƒŒæ™¯**ï¼šä¸€å€‹ 10 äººçš„é–‹ç™¼åœ˜éšŠï¼ˆ3 å‰ç«¯ã€3 å¾Œç«¯ã€2 æ¸¬è©¦ã€1 ç”¢å“ã€1 DevOpsï¼‰éœ€è¦åœ¨ 6 é€±å…§é–‹ç™¼ä¸€å€‹æ–°çš„ã€Œæœƒå“¡ç©åˆ†ç³»çµ±ã€ã€‚

**ç¬¬ 1 é€±ï¼šå¥‘ç´„è¨­è¨ˆéšæ®µ**

```yaml
# åœ˜éšŠå”ä½œæµç¨‹
1. ç”¢å“ç¶“ç† + å¾Œç«¯ä¸»ç®¡ï¼šå®šç¾©æ¥­å‹™éœ€æ±‚èˆ‡åŸºæœ¬ API çµæ§‹
2. å‰ç«¯åœ˜éšŠåŠ å…¥ï¼šæä¾›å‰ç«¯éœ€æ±‚èˆ‡è³‡æ–™æ ¼å¼å»ºè­°
3. æ¸¬è©¦åœ˜éšŠåƒèˆ‡ï¼šç¢ºèªæ¸¬è©¦æ¡ˆä¾‹è¦†è“‹åº¦
4. å…¨é«”è©•å¯©ï¼šAPI è¨­è¨ˆè©•å¯©æœƒè­°
```

**å”ä½œæˆæœï¼šç©åˆ†ç³»çµ± API å¥‘ç´„**

```yaml
# ç©åˆ†ç³»çµ±æ ¸å¿ƒ API
paths:
  /members/{memberId}/points:
    get:
      summary: æŸ¥è©¢æœƒå“¡ç©åˆ†
      description: |
        æŸ¥è©¢æœƒå“¡çš„ç©åˆ†é¤˜é¡å’Œäº¤æ˜“ç´€éŒ„

        **å‰ç«¯éœ€æ±‚**ï¼š
        - éœ€è¦é¡¯ç¤ºç¸½ç©åˆ†
        - éœ€è¦é¡¯ç¤ºå³å°‡åˆ°æœŸçš„ç©åˆ†
        - éœ€è¦åˆ†é çš„äº¤æ˜“ç´€éŒ„

        **æ¸¬è©¦é‡é»**ï¼š
        - æœƒå“¡éš±ç§æ¬Šé™æ§åˆ¶
        - ç©åˆ†è¨ˆç®—æ­£ç¢ºæ€§
        - åˆ†é åŠŸèƒ½
      responses:
        "200":
          description: æˆåŠŸå–å¾—ç©åˆ†è³‡è¨Š
          content:
            application/json:
              schema:
                type: object
                properties:
                  currentPoints:
                    type: integer
                    description: ç›®å‰å¯ç”¨ç©åˆ†
                    example: 1250
                  expiringPoints:
                    type: array
                    description: å³å°‡åˆ°æœŸçš„ç©åˆ†
                    items:
                      type: object
                      properties:
                        points:
                          type: integer
                        expiryDate:
                          type: string
                          format: date
                  transactions:
                    type: array
                    description: ç©åˆ†äº¤æ˜“ç´€éŒ„
                    items:
                      $ref: "#/components/schemas/PointTransaction"
                  pagination:
                    $ref: "#/components/schemas/Pagination"

  /members/{memberId}/points/transactions:
    post:
      summary: å»ºç«‹ç©åˆ†äº¤æ˜“
      description: |
        æ–°å¢ç©åˆ†äº¤æ˜“ï¼ˆæ¶ˆè²»ç²å¾—ç©åˆ†ã€å…Œæ›æ¶ˆè²»ã€ç®¡ç†å“¡èª¿æ•´ç­‰ï¼‰

        **å¾Œç«¯å¯¦ä½œé‡é»**ï¼š
        - äº¤æ˜“åŸå­æ€§ä¿è­‰
        - ç©åˆ†é¤˜é¡å³æ™‚æ›´æ–°
        - é˜²æ­¢é‡è¤‡äº¤æ˜“

        **æ¸¬è©¦æ¡ˆä¾‹**ï¼š
        - ä¸¦ç™¼äº¤æ˜“è™•ç†
        - è² ç©åˆ†é˜²è­·
        - äº¤æ˜“è¨˜éŒ„å®Œæ•´æ€§
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
                - points
                - description
              properties:
                type:
                  type: string
                  enum: [earn, redeem, expire, admin_adjust]
                points:
                  type: integer
                  description: ç©åˆ†æ•¸é‡ï¼ˆæ­£æ•¸è¡¨ç¤ºå¢åŠ ï¼Œè² æ•¸è¡¨ç¤ºæ‰£é™¤ï¼‰
                description:
                  type: string
                  description: äº¤æ˜“èªªæ˜
                orderId:
                  type: string
                  description: é—œè¯çš„è¨‚å–® IDï¼ˆç•¶ type ç‚º earn æˆ– redeem æ™‚å¿…å¡«ï¼‰
                expiryDate:
                  type: string
                  format: date
                  description: ç©åˆ†åˆ°æœŸæ—¥ï¼ˆç•¶ type ç‚º earn æ™‚å¿…å¡«ï¼‰
                adminNote:
                  type: string
                  description: ç®¡ç†å“¡å‚™è¨»ï¼ˆç•¶ type ç‚º admin_adjust æ™‚å¿…å¡«ï¼‰
```

**ç¬¬ 2-3 é€±ï¼šä¸¦è¡Œé–‹ç™¼éšæ®µ**

```
å‰ç«¯åœ˜éšŠï¼š
- æ ¹æ“šå¥‘ç´„å»ºç«‹ TypeScript å‹åˆ¥å®šç¾©
- å»ºç«‹ Mock Server é€²è¡Œé é¢é–‹ç™¼
- å¯¦ä½œç©åˆ†æŸ¥è©¢å’Œäº¤æ˜“ç´€éŒ„é é¢

å¾Œç«¯åœ˜éšŠï¼š
- æ ¹æ“šå¥‘ç´„å¯¦ä½œ API ç«¯é»
- è¨­è¨ˆè³‡æ–™åº« Schema
- å¯¦ä½œæ¥­å‹™é‚è¼¯å’Œäº¤æ˜“å®‰å…¨æ©Ÿåˆ¶

æ¸¬è©¦åœ˜éšŠï¼š
- æ ¹æ“šå¥‘ç´„ç·¨å¯«è‡ªå‹•åŒ–æ¸¬è©¦
- æº–å‚™æ¸¬è©¦è³‡æ–™å’Œæ¸¬è©¦æ¡ˆä¾‹
- è¨­å®š API å¥‘ç´„æ¸¬è©¦
```

**ç¬¬ 4 é€±ï¼šæ•´åˆæ¸¬è©¦éšæ®µ**

```yaml
# ä½¿ç”¨ OpenAPI è‡ªå‹•ç”Ÿæˆçš„æ¸¬è©¦å·¥å…·
test_scenarios:
  - name: "æ­£å¸¸ç©åˆ†æŸ¥è©¢æµç¨‹"
    steps:
      - operation: GET /members/test-user-001/points
        expected_status: 200
        response_validation:
          - schema_compliance: true
          - data_type_check: true
          - business_rule_check:
              - currentPoints >= 0
              - pagination.total >= 0

  - name: "ç©åˆ†äº¤æ˜“å®‰å…¨æ€§æ¸¬è©¦"
    steps:
      - operation: POST /members/other-user/points/transactions
        auth: user-001-token
        expected_status: 403
        description: "ç¢ºä¿ç”¨æˆ¶ç„¡æ³•æ“ä½œä»–äººç©åˆ†"

  - name: "ä¸¦ç™¼ç©åˆ†äº¤æ˜“æ¸¬è©¦"
    concurrent_requests: 10
    operation: POST /members/test-user-001/points/transactions
    data:
      type: redeem
      points: -100
      description: "å…Œæ›æ¸¬è©¦"
    validation:
      - final_balance_consistency: true
      - transaction_count_accuracy: true
```

**ç¬¬ 5-6 é€±ï¼šæ–‡ä»¶èˆ‡äº¤ä»˜éšæ®µ**

åœ˜éšŠåˆ©ç”¨ OpenAPI è‡ªå‹•ç”Ÿæˆï¼š

- **API æ–‡ä»¶ç¶²ç«™**ï¼šä¾›å‰ç«¯åœ˜éšŠåƒè€ƒ
- **SDK ç¨‹å¼ç¢¼**ï¼šè‡ªå‹•ç”Ÿæˆå‰ç«¯ API å‘¼å«ç¨‹å¼ç¢¼
- **æ¸¬è©¦å ±å‘Š**ï¼šå¥‘ç´„ç¬¦åˆåº¦æ¸¬è©¦çµæœ
- **éƒ¨ç½²æ–‡ä»¶**ï¼šAPI éƒ¨ç½²å’Œç›£æ§è¨­å®š

### 3. æŠ€è¡“æ–‡ä»¶ (Technical Documentation)

**æŠ½è±¡æ¦‚å¿µ**ï¼šç³»çµ±çš„ã€Œä½¿ç”¨èªªæ˜æ›¸ã€å’Œã€Œè¨­è¨ˆè—åœ–ã€

```
æŠ€è¡“æ–‡ä»¶ = ç³»çµ±çŸ¥è­˜çš„å¤–åŒ–è¡¨é”
- æ¶æ§‹è¨­è¨ˆæ–‡ä»¶ â†’ æˆ¿å­çš„çµæ§‹åœ–
- API æ–‡ä»¶ â†’ å„éƒ¨ä»¶çš„æ¥å£èªªæ˜
- éƒ¨ç½²æ–‡ä»¶ â†’ çµ„è£æŒ‡å—
- é–‹ç™¼æŒ‡å— â†’ å»ºé€ æ‰‹å†Š
- æ•…éšœæ’é™¤ â†’ ç¶­ä¿®èªªæ˜æ›¸
```

æŠ€è¡“æ–‡ä»¶æ˜¯è»Ÿé«”é–‹ç™¼ä¸­çš„ã€ŒçŸ¥è­˜åŸºç¤è¨­æ–½ã€ï¼Œå®ƒå°‡éš±æ€§çŸ¥è­˜è½‰åŒ–ç‚ºé¡¯æ€§çŸ¥è­˜ï¼Œç¢ºä¿åœ˜éšŠçš„æ™ºæ…§è³‡ç”¢ä¸æœƒå› ç‚ºäººå“¡æµå‹•è€Œæµå¤±ã€‚æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœä½ æ¥æ‰‹ä¸€å€‹æ²’æœ‰ä»»ä½•æ–‡ä»¶çš„å°ˆæ¡ˆï¼Œå°±åƒæ˜¯æ‹¿åˆ°ä¸€å€‹æ²’æœ‰èªªæ˜æ›¸çš„è¤‡é›œæ©Ÿå™¨ï¼Œä½ éœ€è¦èŠ±è²»å¤§é‡æ™‚é–“å»é€†å‘å·¥ç¨‹æ‰èƒ½ç†è§£å®ƒçš„é‹ä½œåŸç†ã€‚

#### 3.1 ç‚ºä»€éº¼æŠ€è¡“æ–‡ä»¶å¦‚æ­¤é‡è¦ï¼Ÿ

**æƒ…å¢ƒé‡ç¾ï¼šæ²’æœ‰æŠ€è¡“æ–‡ä»¶çš„å›°å¢ƒ**

```
å ´æ™¯ä¸€ï¼šæ–°äººå…¥è·
æ–°å·¥ç¨‹å¸«ï¼šã€Œé€™å€‹ç³»çµ±è¦æ€éº¼è·‘èµ·ä¾†ï¼Ÿã€
è³‡æ·±å·¥ç¨‹å¸«ï¼šã€Œä½ è¦å…ˆè£ Dockerï¼Œç„¶å¾Œ...ç­‰ç­‰ï¼Œè®“æˆ‘æƒ³æƒ³é‚„éœ€è¦ä»€éº¼...ã€
æ–°å·¥ç¨‹å¸«ï¼šã€Œè³‡æ–™åº«è¦æ€éº¼è¨­å®šï¼Ÿã€
è³‡æ·±å·¥ç¨‹å¸«ï¼šã€Œé€™å€‹...æˆ‘è¨˜å¾—ç•¶åˆæ˜¯é€™æ¨£åšçš„ï¼Œä½†å¯èƒ½æœ‰äº›æ­¥é©Ÿå¿˜äº†...ã€

å ´æ™¯äºŒï¼šç³»çµ±æ•…éšœ
å€¼ç­å·¥ç¨‹å¸«ï¼šã€Œç³»çµ±æ›äº†ï¼é€™å€‹éŒ¯èª¤æ˜¯ä»€éº¼æ„æ€ï¼Ÿã€
ï¼ˆè¯çµ¡ä¸åˆ°åŸé–‹ç™¼è€…ï¼‰
ç”¢å“ç¶“ç†ï¼šã€Œä»€éº¼æ™‚å€™èƒ½ä¿®å¥½ï¼Ÿå®¢æˆ¶åœ¨ç­‰ï¼ã€
å€¼ç­å·¥ç¨‹å¸«ï¼šã€Œæˆ‘éœ€è¦å…ˆç ”ç©¶ç¨‹å¼ç¢¼...å¯èƒ½è¦å¹¾å€‹å°æ™‚...ã€

å ´æ™¯ä¸‰ï¼šæŠ€è¡“å‚µå‹™
ä¸»ç®¡ï¼šã€Œé€™å€‹åŠŸèƒ½ç‚ºä»€éº¼ç•¶åˆè¦é€™æ¨£è¨­è¨ˆï¼Ÿã€
å·¥ç¨‹å¸«ï¼šã€Œå‘ƒ...æˆ‘ä¸çŸ¥é“ï¼ŒåŸæœ¬çš„é–‹ç™¼è€…å·²ç¶“é›¢è·äº†...ã€
ä¸»ç®¡ï¼šã€Œé‚£æˆ‘å€‘èƒ½ä¸èƒ½æ”¹ï¼Ÿæœƒæœ‰ä»€éº¼å½±éŸ¿ï¼Ÿã€
å·¥ç¨‹å¸«ï¼šã€Œä¸æ•¢å‹•ï¼Œæ€•æœƒå½±éŸ¿åˆ°å…¶ä»–åŠŸèƒ½...ã€
```

é€™äº›å ´æ™¯æ˜¯å¦ä¼¼æ›¾ç›¸è­˜ï¼ŸæŠ€è¡“æ–‡ä»¶çš„ç¼ºå¤±æœƒå°è‡´ï¼š

- **çŸ¥è­˜å­¤å³¶**ï¼šæ ¸å¿ƒçŸ¥è­˜åªå­˜åœ¨å°‘æ•¸äººè…¦ä¸­
- **é‡è¤‡æŠ•å…¥**ï¼šæ¯æ¬¡éƒ½è¦é‡æ–°æ‘¸ç´¢å’Œå­¸ç¿’
- **é¢¨éšªç´¯ç©**ï¼šæ²’äººæ•¢å‹•ã€Œç¥–å‚³ç¨‹å¼ç¢¼ã€
- **æ•ˆç‡ä½ä¸‹**ï¼šç°¡å–®å•é¡Œè®Šæˆè¤‡é›œèª¿æŸ¥

#### 3.2 æŠ€è¡“æ–‡ä»¶çš„å±¤æ¬¡æ¶æ§‹

æŠ€è¡“æ–‡ä»¶æ‡‰è©²æ˜¯ä¸€å€‹å®Œæ•´çš„çŸ¥è­˜é«”ç³»ï¼Œæˆ‘å€‘å¯ä»¥æŒ‰ç…§ä¸åŒçš„å—çœ¾å’Œç”¨é€”ä¾†åˆ†å±¤ï¼š

**ç¬¬ä¸€å±¤ï¼šæˆ°ç•¥å±¤æ–‡ä»¶ (Strategic Level)**

- å—çœ¾ï¼šæŠ€è¡“ä¸»ç®¡ã€æ¶æ§‹å¸«ã€ç”¢å“ç¶“ç†
- ç›®çš„ï¼šç†è§£ç³»çµ±çš„æ•´é«”è¨­è¨ˆæ€è·¯å’Œå•†æ¥­è„ˆçµ¡

**ç¬¬äºŒå±¤ï¼šæˆ°è¡“å±¤æ–‡ä»¶ (Tactical Level)**

- å—çœ¾ï¼šé–‹ç™¼åœ˜éšŠã€DevOps å·¥ç¨‹å¸«
- ç›®çš„ï¼šç†è§£å…·é«”çš„æŠ€è¡“å¯¦ä½œå’Œæ“ä½œæµç¨‹

**ç¬¬ä¸‰å±¤ï¼šæ“ä½œå±¤æ–‡ä»¶ (Operational Level)**

- å—çœ¾ï¼šæ‰€æœ‰åœ˜éšŠæˆå“¡ã€ç¶­é‹äººå“¡
- ç›®çš„ï¼šè§£æ±ºæ—¥å¸¸é–‹ç™¼å’Œç¶­é‹ä¸­çš„å…·é«”å•é¡Œ

#### 3.3 æˆ°ç•¥å±¤æ–‡ä»¶ï¼šç³»çµ±å…¨è²Œçš„é³¥ç°åœ–

**1. ç³»çµ±æ¶æ§‹æ¦‚è¦½ (System Architecture Overview)**

````markdown
# é›»å•†å¹³å°æŠ€è¡“æ¶æ§‹æ–‡ä»¶

## ç³»çµ±æ¦‚è¿°

### å•†æ¥­èƒŒæ™¯

é›»å•†å¹³å°éœ€è¦è™•ç†é«˜ä¸¦ç™¼çš„å•†å“ç€è¦½ã€ä¸‹å–®å’Œæ”¯ä»˜æµç¨‹ï¼ŒåŒæ™‚ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§å’Œç³»çµ±ç©©å®šæ€§ã€‚

### æŠ€è¡“ç›®æ¨™

- **é«˜å¯ç”¨æ€§**ï¼š99.9% ç³»çµ±å¯ç”¨æ™‚é–“
- **é«˜æ€§èƒ½**ï¼šé¦–é è¼‰å…¥æ™‚é–“ < 2 ç§’
- **é«˜æ“´å±•æ€§**ï¼šæ”¯æ´ 10x æµé‡å¢é•·
- **é«˜å®‰å…¨æ€§**ï¼šç¬¦åˆ PCI DSS æ”¯ä»˜å®‰å…¨æ¨™æº–

### æ•´é«”æ¶æ§‹åœ– (C4 Model)

#### Level 1: ç³»çµ±ä¸Šä¸‹æ–‡åœ– (System Context)

```mermaid
C4Context
    title é›»å•†å¹³å°ç³»çµ±ä¸Šä¸‹æ–‡åœ–

    Person(customer, "é¡§å®¢", "è³¼è²·å•†å“çš„ç”¨æˆ¶")
    Person(admin, "ç®¡ç†å“¡", "ç®¡ç†å•†å“å’Œè¨‚å–®çš„å…§éƒ¨ç”¨æˆ¶")
    Person(vendor, "ä¾›æ‡‰å•†", "æä¾›å•†å“çš„åˆä½œå¤¥ä¼´")

    System(ecommerce, "é›»å•†å¹³å°", "æä¾›ç·šä¸Šè³¼ç‰©åŠŸèƒ½çš„æ ¸å¿ƒç³»çµ±")

    System_Ext(payment, "æ”¯ä»˜ç³»çµ±", "ç¬¬ä¸‰æ–¹æ”¯ä»˜æœå‹™ (Stripe, PayPal)")
    System_Ext(shipping, "ç‰©æµç³»çµ±", "ç¬¬ä¸‰æ–¹ç‰©æµè¿½è¹¤æœå‹™")
    System_Ext(notification, "é€šçŸ¥ç³»çµ±", "éƒµä»¶å’Œç°¡è¨Šæœå‹™ (SendGrid, Twilio)")
    System_Ext(analytics, "åˆ†æç³»çµ±", "æ•¸æ“šåˆ†æå¹³å° (Google Analytics)")

    Rel(customer, ecommerce, "ç€è¦½å•†å“ã€ä¸‹å–®è³¼è²·", "HTTPS")
    Rel(admin, ecommerce, "ç®¡ç†å•†å“ã€è™•ç†è¨‚å–®", "HTTPS")
    Rel(vendor, ecommerce, "ä¸Šæ¶å•†å“ã€æŸ¥çœ‹éŠ·å”®æ•¸æ“š", "HTTPS")

    Rel(ecommerce, payment, "è™•ç†æ”¯ä»˜", "API")
    Rel(ecommerce, shipping, "è¿½è¹¤ç‰©æµ", "API")
    Rel(ecommerce, notification, "ç™¼é€é€šçŸ¥", "API")
    Rel(ecommerce, analytics, "è¨˜éŒ„ç”¨æˆ¶è¡Œç‚º", "JavaScript SDK")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="2")
```
````

#### Level 2: å®¹å™¨åœ– (Container Diagram)

```mermaid
C4Container
    title é›»å•†å¹³å°å®¹å™¨åœ–

    Person(customer, "é¡§å®¢")
    Person(admin, "ç®¡ç†å“¡")

    Container_Boundary(frontend, "å‰ç«¯æ‡‰ç”¨") {
        Container(web, "Web æ‡‰ç”¨", "React.js", "æä¾›è³¼ç‰©ç¶²ç«™ç•Œé¢")
        Container(mobile, "è¡Œå‹•æ‡‰ç”¨", "React Native", "æä¾›è¡Œå‹•è³¼ç‰©é«”é©—")
        Container(admin_panel, "ç®¡ç†å¾Œå°", "Vue.js", "æä¾›å•†å“å’Œè¨‚å–®ç®¡ç†ç•Œé¢")
    }

    Container_Boundary(api_layer, "API å±¤") {
        Container(api_gateway, "API Gateway", "Kong", "çµ±ä¸€çš„APIå…¥å£ï¼Œè™•ç†èªè­‰ã€é™æµã€è·¯ç”±")
        Container(cdn, "CDN", "CloudFlare", "éœæ…‹è³‡æºåˆ†ç™¼å’Œå¿«å–")
    }

    Container_Boundary(services, "å¾®æœå‹™å±¤") {
        Container(user_service, "ç”¨æˆ¶æœå‹™", "Node.js + Express", "è™•ç†ç”¨æˆ¶è¨»å†Šã€ç™»å…¥ã€å€‹äººè³‡æ–™")
        Container(product_service, "å•†å“æœå‹™", "Python + FastAPI", "ç®¡ç†å•†å“ä¿¡æ¯ã€åº«å­˜ã€åˆ†é¡")
        Container(order_service, "è¨‚å–®æœå‹™", "Java + Spring Boot", "è™•ç†è¨‚å–®æµç¨‹ã€æ”¯ä»˜ã€ç‰©æµ")
        Container(notification_service, "é€šçŸ¥æœå‹™", "Node.js", "ç™¼é€éƒµä»¶ã€ç°¡è¨Šã€æ¨æ’­é€šçŸ¥")
    }

    Container_Boundary(data_layer, "æ•¸æ“šå±¤") {
        ContainerDb(user_db, "ç”¨æˆ¶è³‡æ–™åº«", "PostgreSQL", "å­˜å„²ç”¨æˆ¶ä¿¡æ¯å’Œèªè­‰è³‡æ–™")
        ContainerDb(product_db, "å•†å“è³‡æ–™åº«", "PostgreSQL", "å­˜å„²å•†å“å’Œåº«å­˜ä¿¡æ¯")
        ContainerDb(order_db, "è¨‚å–®è³‡æ–™åº«", "PostgreSQL", "å­˜å„²è¨‚å–®å’Œæ”¯ä»˜ä¿¡æ¯")
        ContainerDb(cache, "å¿«å–å±¤", "Redis", "å¿«å–ç†±é–€å•†å“å’Œæœƒè©±ä¿¡æ¯")
        ContainerDb(search, "æœå°‹å¼•æ“", "Elasticsearch", "æä¾›å•†å“æœå°‹åŠŸèƒ½")
    }

    Container_Boundary(infrastructure, "åŸºç¤è¨­æ–½") {
        Container(message_queue, "è¨Šæ¯ä½‡åˆ—", "Apache Kafka", "ç•°æ­¥äº‹ä»¶è™•ç†")
        Container(file_storage, "æª”æ¡ˆå­˜å„²", "AWS S3", "å­˜å„²å•†å“åœ–ç‰‡å’Œæª”æ¡ˆ")
        Container(monitoring, "ç›£æ§ç³»çµ±", "Prometheus + Grafana", "ç³»çµ±ç›£æ§å’Œå‘Šè­¦")
    }

    System_Ext(payment_sys, "æ”¯ä»˜ç³»çµ±", "Stripe")
    System_Ext(shipping_sys, "ç‰©æµç³»çµ±", "ç‰©æµAPI")

    Rel(customer, web, "ä½¿ç”¨", "HTTPS")
    Rel(customer, mobile, "ä½¿ç”¨", "HTTPS")
    Rel(admin, admin_panel, "ä½¿ç”¨", "HTTPS")

    Rel(web, api_gateway, "APIå‘¼å«", "HTTPS/JSON")
    Rel(mobile, api_gateway, "APIå‘¼å«", "HTTPS/JSON")
    Rel(admin_panel, api_gateway, "APIå‘¼å«", "HTTPS/JSON")

    Rel(api_gateway, user_service, "è·¯ç”±è«‹æ±‚", "HTTP/JSON")
    Rel(api_gateway, product_service, "è·¯ç”±è«‹æ±‚", "HTTP/JSON")
    Rel(api_gateway, order_service, "è·¯ç”±è«‹æ±‚", "HTTP/JSON")

    Rel(user_service, user_db, "è®€å¯«", "SQL")
    Rel(product_service, product_db, "è®€å¯«", "SQL")
    Rel(order_service, order_db, "è®€å¯«", "SQL")

    Rel(product_service, cache, "å¿«å–", "Redis Protocol")
    Rel(product_service, search, "ç´¢å¼•", "REST API")
    Rel(order_service, payment_sys, "æ”¯ä»˜", "HTTPS/API")
    Rel(order_service, shipping_sys, "ç‰©æµ", "HTTPS/API")

    Rel(user_service, message_queue, "ç™¼å¸ƒäº‹ä»¶", "Kafka Protocol")
    Rel(order_service, message_queue, "ç™¼å¸ƒäº‹ä»¶", "Kafka Protocol")
    Rel(notification_service, message_queue, "è¨‚é–±äº‹ä»¶", "Kafka Protocol")

    UpdateLayoutConfig($c4ShapeInRow="2", $c4BoundaryInRow="1")
```

#### Level 3: çµ„ä»¶åœ– (Component Diagram) - ä»¥å•†å“æœå‹™ç‚ºä¾‹

```mermaid
C4Component
    title å•†å“æœå‹™çµ„ä»¶åœ–

    Container(api_gateway, "API Gateway", "Kong")
    ContainerDb(product_db, "å•†å“è³‡æ–™åº«", "PostgreSQL")
    ContainerDb(cache, "Rediså¿«å–", "Redis")
    ContainerDb(search, "æœå°‹å¼•æ“", "Elasticsearch")
    Container(message_queue, "Kafka", "Apache Kafka")

    Container_Boundary(product_service, "å•†å“æœå‹™") {
        Component(product_controller, "å•†å“æ§åˆ¶å™¨", "FastAPI Router", "è™•ç†HTTPè«‹æ±‚å’Œå›æ‡‰")
        Component(product_service_layer, "å•†å“æ¥­å‹™é‚è¼¯", "Python Service", "å¯¦ç¾å•†å“ç›¸é—œæ¥­å‹™è¦å‰‡")
        Component(inventory_service, "åº«å­˜ç®¡ç†", "Python Service", "ç®¡ç†å•†å“åº«å­˜å’Œé è¨‚")
        Component(category_service, "åˆ†é¡ç®¡ç†", "Python Service", "ç®¡ç†å•†å“åˆ†é¡çµæ§‹")
        Component(search_service, "æœå°‹æœå‹™", "Python Service", "è™•ç†å•†å“æœå°‹å’Œç¯©é¸")

        Component(product_repository, "å•†å“å€‰å„²", "SQLAlchemy ORM", "æ•¸æ“šå­˜å–å±¤")
        Component(cache_manager, "å¿«å–ç®¡ç†å™¨", "Redis Client", "å¿«å–ç­–ç•¥å’Œå¤±æ•ˆè™•ç†")
        Component(search_indexer, "æœå°‹ç´¢å¼•å™¨", "Elasticsearch Client", "ç¶­è­·æœå°‹ç´¢å¼•")
        Component(event_publisher, "äº‹ä»¶ç™¼å¸ƒå™¨", "Kafka Producer", "ç™¼å¸ƒé ˜åŸŸäº‹ä»¶")

        Component(product_model, "å•†å“æ¨¡å‹", "Pydantic Model", "è³‡æ–™é©—è­‰å’Œåºåˆ—åŒ–")
        Component(inventory_model, "åº«å­˜æ¨¡å‹", "Pydantic Model", "åº«å­˜è³‡æ–™çµæ§‹")
    }

    Rel(api_gateway, product_controller, "HTTPè«‹æ±‚", "JSON/HTTPS")

    Rel(product_controller, product_service_layer, "èª¿ç”¨", "Python")
    Rel(product_controller, inventory_service, "èª¿ç”¨", "Python")
    Rel(product_controller, category_service, "èª¿ç”¨", "Python")
    Rel(product_controller, search_service, "èª¿ç”¨", "Python")

    Rel(product_service_layer, product_repository, "æ•¸æ“šæ“ä½œ", "SQLAlchemy")
    Rel(inventory_service, product_repository, "åº«å­˜æŸ¥è©¢", "SQLAlchemy")
    Rel(search_service, search_indexer, "æœå°‹æŸ¥è©¢", "Python")

    Rel(product_service_layer, cache_manager, "å¿«å–æ“ä½œ", "Redis")
    Rel(product_service_layer, event_publisher, "ç™¼å¸ƒäº‹ä»¶", "Kafka")

    Rel(product_repository, product_db, "SQLæŸ¥è©¢", "PostgreSQL")
    Rel(cache_manager, cache, "å¿«å–è®€å¯«", "Redis Protocol")
    Rel(search_indexer, search, "ç´¢å¼•æ“ä½œ", "REST API")
    Rel(event_publisher, message_queue, "äº‹ä»¶ç™¼å¸ƒ", "Kafka Protocol")

    Rel(product_service_layer, product_model, "ä½¿ç”¨", "Python")
    Rel(inventory_service, inventory_model, "ä½¿ç”¨", "Python")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")
```

#### Level 4: ç¨‹å¼ç¢¼åœ– (Code Diagram) - å•†å“æ¨¡å‹è©³ç´°è¨­è¨ˆ

```mermaid
classDiagram
    class Product {
        +UUID id
        +String name
        +String description
        +Decimal price
        +Decimal original_price
        +String category_id
        +List~String~ images
        +Integer stock
        +Boolean is_active
        +DateTime created_at
        +DateTime updated_at
        +String created_by
        +calculate_discount_percentage() Decimal
        +is_in_stock() Boolean
        +update_stock(quantity: Integer) None
        +mark_as_sold_out() None
    }

    class Category {
        +UUID id
        +String name
        +String description
        +String parent_id
        +Integer sort_order
        +Boolean is_active
        +get_full_path() String
        +get_children() List~Category~
        +get_products() List~Product~
    }

    class Inventory {
        +UUID id
        +UUID product_id
        +Integer available_stock
        +Integer reserved_stock
        +Integer reorder_level
        +DateTime last_updated
        +reserve_stock(quantity: Integer) Boolean
        +release_reservation(quantity: Integer) None
        +adjust_stock(quantity: Integer, reason: String) None
        +is_below_reorder_level() Boolean
    }

    class ProductImage {
        +UUID id
        +UUID product_id
        +String url
        +String alt_text
        +Integer sort_order
        +Boolean is_primary
        +ImageType type
    }

    class ProductReview {
        +UUID id
        +UUID product_id
        +UUID user_id
        +Integer rating
        +String comment
        +List~String~ images
        +DateTime created_at
        +Boolean is_verified_purchase
        +Integer helpful_count
    }

    class SearchIndex {
        +UUID product_id
        +String search_text
        +Map~String,Any~ attributes
        +List~String~ tags
        +DateTime indexed_at
        +update_index() None
        +remove_from_index() None
    }



    class ProductService {
        -ProductRepository repository
        -CacheManager cache
        -EventPublisher events
        +create_product(data: CreateProductRequest) Product
        +get_product(id: UUID) Product
        +update_product(id: UUID, data: UpdateProductRequest) Product
        +delete_product(id: UUID) None
        +search_products(criteria: SearchCriteria) List~Product~
        +get_products_by_category(category_id: UUID) List~Product~
    }

    class InventoryService {
        -ProductRepository repository
        -EventPublisher events
        +reserve_stock(product_id: UUID, quantity: Integer) Boolean
        +release_stock(product_id: UUID, quantity: Integer) None
        +adjust_stock(product_id: UUID, quantity: Integer, reason: String) None
        +check_stock_availability(product_id: UUID, quantity: Integer) Boolean
        +get_low_stock_products() List~Product~
    }

    ProductService --> Product : manages
    ProductService --> ProductRepository : uses
    InventoryService --> Inventory : manages
    InventoryService --> Product : updates
```

```

#### æ¶æ§‹æ±ºç­–èªªæ˜

**ç‚ºä»€éº¼æ¡ç”¨ C4 Modelï¼Ÿ**

1. **å±¤æ¬¡åŒ–è¦–è§’**ï¼šå¾é«˜å±¤æ¬¡çš„ç³»çµ±ä¸Šä¸‹æ–‡åˆ°å…·é«”çš„ç¨‹å¼ç¢¼å¯¦ä½œï¼Œæä¾›äº†å®Œæ•´çš„æ¶æ§‹è¦–è§’
2. **å—çœ¾å°å‘**ï¼šä¸åŒå±¤æ¬¡çš„åœ–è¡¨é©åˆä¸åŒçš„å—çœ¾ï¼ˆé«˜ç®¡ã€æ¶æ§‹å¸«ã€é–‹ç™¼è€…ï¼‰
3. **æ¨™æº–åŒ–è¡¨ç¤º**ï¼šä½¿ç”¨çµ±ä¸€çš„ç¬¦è™Ÿå’Œç´„å®šï¼Œæé«˜äº†æºé€šæ•ˆç‡
4. **å¯ç¶­è­·æ€§**ï¼šçµæ§‹åŒ–çš„è¡¨ç¤ºæ–¹å¼ä¾¿æ–¼æ–‡ä»¶ç¶­è­·å’Œæ›´æ–°

**å„å±¤æ¬¡çš„ç”¨é€”**ï¼š

- **Level 1 (Context)**ï¼šé©åˆå‘æ¥­å‹™äººå“¡å’Œé«˜ç®¡å±•ç¤ºç³»çµ±é‚Šç•Œ
- **Level 2 (Container)**ï¼šé©åˆæ¶æ§‹å¸«å’ŒæŠ€è¡“ä¸»ç®¡äº†è§£æŠ€è¡“é¸å‹
- **Level 3 (Component)**ï¼šé©åˆé–‹ç™¼åœ˜éšŠç†è§£æ¨¡çµ„è¨­è¨ˆ
- **Level 4 (Code)**ï¼šé©åˆé–‹ç™¼è€…äº†è§£å…·é«”å¯¦ä½œç´°ç¯€

### æ ¸å¿ƒè¨­è¨ˆæ±ºç­–

#### ç‚ºä»€éº¼é¸æ“‡å¾®æœå‹™æ¶æ§‹ï¼Ÿ

**å•é¡Œ**ï¼šåŸæœ¬çš„å–®é«”æ¶æ§‹åœ¨æµé‡å¢é•·å¾Œå‡ºç¾æ•ˆèƒ½ç“¶é ¸
**è§£æ±ºæ–¹æ¡ˆ**ï¼šæ¡ç”¨å¾®æœå‹™æ¶æ§‹ï¼ŒæŒ‰æ¥­å‹™é ˜åŸŸæ‹†åˆ†æœå‹™
**å„ªé»**ï¼š

- ç¨ç«‹éƒ¨ç½²ï¼šä¸åŒæœå‹™å¯ä»¥ç¨ç«‹ç™¼å¸ƒ
- æŠ€è¡“å¤šæ¨£æ€§ï¼šå¯ä»¥ç‚ºä¸åŒæœå‹™é¸æ“‡æœ€é©åˆçš„æŠ€è¡“æ£§
- æ•…éšœéš”é›¢ï¼šå–®ä¸€æœå‹™æ•…éšœä¸æœƒå½±éŸ¿æ•´å€‹ç³»çµ±

**æ¬Šè¡¡è€ƒé‡**ï¼š

- è¤‡é›œåº¦å¢åŠ ï¼šéœ€è¦è™•ç†åˆ†æ•£å¼ç³»çµ±çš„è¤‡é›œæ€§
- é‹ç¶­æˆæœ¬ï¼šéœ€è¦æ›´å¤šçš„ç›£æ§å’Œéƒ¨ç½²æµç¨‹
- è³‡æ–™ä¸€è‡´æ€§ï¼šéœ€è¦è™•ç†è·¨æœå‹™çš„äº‹å‹™ç®¡ç†

#### ç‚ºä»€éº¼é¸æ“‡ Event-Driven æ¶æ§‹ï¼Ÿ

**å•é¡Œ**ï¼šæœå‹™é–“çš„åŒæ­¥èª¿ç”¨é€ æˆç´šè¯æ•…éšœ
**è§£æ±ºæ–¹æ¡ˆ**ï¼šæ¡ç”¨äº‹ä»¶é©…å‹•æ¶æ§‹ï¼Œé€éè¨Šæ¯ä½‡åˆ—å¯¦ç¾ç•°æ­¥é€šè¨Š
**å¯¦ä½œ**ï¼šä½¿ç”¨ Apache Kafka ä½œç‚ºäº‹ä»¶æµå¹³å°

### é—œéµå“è³ªå±¬æ€§

| å“è³ªå±¬æ€§ | ç›®æ¨™æŒ‡æ¨™      | å¯¦ç¾ç­–ç•¥                           |
| -------- | ------------- | ---------------------------------- |
| å¯ç”¨æ€§   | 99.9%         | å¤šå€åŸŸéƒ¨ç½²ã€è² è¼‰å‡è¡¡ã€è‡ªå‹•æ•…éšœåˆ‡æ› |
| æ•ˆèƒ½     | < 2s éŸ¿æ‡‰æ™‚é–“ | CDNã€Redis å¿«å–ã€è³‡æ–™åº«å„ªåŒ–        |
| æ“´å±•æ€§   | æ”¯æ´ 10x æµé‡ | æ°´å¹³æ“´å±•ã€è‡ªå‹•æ“´ç¸®å®¹               |
| å®‰å…¨æ€§   | PCI DSS åˆè¦  | HTTPSã€OAuth 2.0ã€è³‡æ–™åŠ å¯†         |

```

**2. æŠ€è¡“é¸å‹æ±ºç­–è¨˜éŒ„ (Architecture Decision Records, ADR)**

```markdown
# ADR-001: æ¡ç”¨ React.js ä½œç‚ºå‰ç«¯æ¡†æ¶

## ç‹€æ…‹

å·²æ¥å— (2024-01-15)

## èƒŒæ™¯

æˆ‘å€‘éœ€è¦é¸æ“‡ä¸€å€‹å‰ç«¯æ¡†æ¶ä¾†å»ºæ§‹é›»å•†å¹³å°çš„ä½¿ç”¨è€…ä»‹é¢ã€‚ä¸»è¦è€ƒæ…®çš„é¸é …æœ‰ React.jsã€Vue.js å’Œ Angularã€‚

## æ±ºç­–

é¸æ“‡ React.js ä½œç‚ºä¸»è¦å‰ç«¯æ¡†æ¶ã€‚

## ç†ç”±

### å„ªé»

1. **è±å¯Œçš„ç”Ÿæ…‹ç³»çµ±**ï¼šæœ‰å¤§é‡çš„ç¬¬ä¸‰æ–¹å¥—ä»¶å’Œå·¥å…·
2. **åœ˜éšŠç†Ÿæ‚‰åº¦**ï¼šç¾æœ‰åœ˜éšŠæˆå“¡å° React è¼ƒç‚ºç†Ÿæ‚‰
3. **ç¤¾ç¾¤æ”¯æ´**ï¼šæ´»èºçš„ç¤¾ç¾¤å’Œè±å¯Œçš„å­¸ç¿’è³‡æº
4. **ä¼æ¥­ç´šæ‡‰ç”¨**ï¼šè¢«çœ¾å¤šå¤§å‹ä¼æ¥­å»£æ³›ä½¿ç”¨ï¼Œè­‰æ˜å…¶ç©©å®šæ€§

### æ¬Šè¡¡

1. **å­¸ç¿’æ›²ç·š**ï¼šæ–°æ‰‹å¯èƒ½éœ€è¦æ™‚é–“é©æ‡‰ JSX èªæ³•
2. **å·¥å…·éˆè¤‡é›œ**ï¼šéœ€è¦é…ç½® webpackã€babel ç­‰å·¥å…·
3. **ç‰ˆæœ¬æ›´æ–°**ï¼šReact æ›´æ–°è¼ƒç‚ºé »ç¹ï¼Œéœ€è¦æŒçºŒè·Ÿé€²

## æ›¿ä»£æ–¹æ¡ˆ

- **Vue.js**ï¼šå­¸ç¿’æ›²ç·šè¼ƒç·©ï¼Œä½†ç”Ÿæ…‹ç³»çµ±ç›¸å°è¼ƒå°
- **Angular**ï¼šå®Œæ•´çš„æ¡†æ¶ï¼Œä½†å°å°å‹åœ˜éšŠä¾†èªªå¯èƒ½éæ–¼è¤‡é›œ

## å½±éŸ¿

- å‰ç«¯é–‹ç™¼åœ˜éšŠéœ€è¦çµ±ä¸€ä½¿ç”¨ React.js
- éœ€è¦å»ºç«‹ React ç›¸é—œçš„é–‹ç™¼è¦ç¯„å’Œæœ€ä½³å¯¦å‹™
- CI/CD æµç¨‹éœ€è¦æ”¯æ´ React å°ˆæ¡ˆçš„å»ºç½®å’Œéƒ¨ç½²

## ç›¸é—œæ–‡ä»¶

- [React é–‹ç™¼è¦ç¯„](./frontend-coding-standards.md)
- [å‰ç«¯å°ˆæ¡ˆçµæ§‹](./frontend-project-structure.md)
```

#### 3.4 æˆ°è¡“å±¤æ–‡ä»¶ï¼šå¯¦ä½œç´°ç¯€çš„æ·±åº¦æŒ‡å—

**1. é–‹ç™¼ç’°å¢ƒè¨­å®šæŒ‡å—**

```markdown
# é–‹ç™¼ç’°å¢ƒè¨­å®šæŒ‡å—

## å‰ç½®éœ€æ±‚

### ç³»çµ±éœ€æ±‚

- **ä½œæ¥­ç³»çµ±**ï¼šmacOS 10.15+ã€Ubuntu 18.04+ã€Windows 10+
- **è¨˜æ†¶é«”**ï¼šå»ºè­° 16GB ä»¥ä¸Š
- **ç¡¬ç¢Ÿç©ºé–“**ï¼šè‡³å°‘ 20GB å¯ç”¨ç©ºé–“

### å¿…è¦è»Ÿé«”

- Node.js 18.x (ä½¿ç”¨ nvm ç®¡ç†ç‰ˆæœ¬)
- Docker Desktop 4.x
- Git 2.x
- IDEï¼šæ¨è–¦ VS Code æˆ– WebStorm

## ç’°å¢ƒå®‰è£æ­¥é©Ÿ

### 1. å®‰è£ Node.js å’Œ npm

### 2. å®‰è£ Docker

### 3. å…‹éš†å°ˆæ¡ˆä¸¦å®‰è£ä¾è³´

### 4. ç’°å¢ƒè¨­å®š

### 5. å•Ÿå‹•æœ¬åœ°æœå‹™

### 6. é©—è­‰å®‰è£

### å¸¸è¦‹å•é¡Œæ’è§£

### HTTP ç‹€æ…‹ç¢¼ä½¿ç”¨è¦ç¯„
```

## äº’å‹•å¼æ–‡ä»¶å¹³å°

### 1. GitBook

**å„ªé»**ï¼šç¾è§€ã€æ˜“ç”¨ã€æ”¯æ´å”ä½œ
**è¨­å®šç¯„ä¾‹**ï¼š

```yaml
# .gitbook.yaml
root: ./docs
structure:
  readme: README.md
  summary: SUMMARY.md
```

### 2. Notion

**å„ªé»**ï¼šæ‰€è¦‹å³æ‰€å¾—ã€æ”¯æ´è³‡æ–™åº«ã€åœ˜éšŠå”ä½œä½³
**ä½¿ç”¨æŠ€å·§**ï¼š

- å»ºç«‹æ–‡ä»¶æ¨¡æ¿
- ä½¿ç”¨è³‡æ–™åº«ç®¡ç† API æ¸…å–®
- è¨­å®šè‡ªå‹•åŒ–å·¥ä½œæµç¨‹

### 3. Confluence

**å„ªé»**ï¼šä¼æ¥­ç´šåŠŸèƒ½ã€èˆ‡ Jira æ•´åˆä½³
**æœ€ä½³å¯¦å‹™**ï¼š

- å»ºç«‹æ¸…æ™°çš„ç©ºé–“çµæ§‹
- ä½¿ç”¨æ¨™ç±¤å’Œæ¨™ç±¤é€²è¡Œåˆ†é¡
- è¨­å®šå®šæœŸæ–‡ä»¶å¯©æŸ¥æµç¨‹

````

**3. æ–‡ä»¶ç¶­è­·ç­–ç•¥**

```markdown
# æ–‡ä»¶ç¶­è­·ç­–ç•¥

## æ–‡ä»¶ç”Ÿå‘½é€±æœŸç®¡ç†

### å»ºç«‹éšæ®µ
- [ ] ç¢ºå®šæ–‡ä»¶ç›®æ¨™å—çœ¾
- [ ] é¸æ“‡é©ç•¶çš„æ–‡ä»¶é¡å‹å’Œæ¨¡æ¿
- [ ] æ’°å¯«åˆç‰ˆå…§å®¹
- [ ] åŒå„•å¯©æŸ¥

### ç¶­è­·éšæ®µ
- [ ] å®šæœŸå¯©æŸ¥å’Œæ›´æ–° (æ¯å­£åº¦)
- [ ] æ ¹æ“šç¨‹å¼ç¢¼è®Šæ›´åŒæ­¥æ›´æ–°
- [ ] æ”¶é›†ä½¿ç”¨è€…å›é¥‹
- [ ] æ•ˆèƒ½æŒ‡æ¨™è¿½è¹¤

### æ·˜æ±°éšæ®µ
- [ ] è­˜åˆ¥éæ™‚æ–‡ä»¶
- [ ] æ­¸æª”æˆ–åˆªé™¤
- [ ] é‡æ–°å°å‘åˆ°æ–°æ–‡ä»¶

## å“è³ªä¿è­‰æª¢æŸ¥æ¸…å–®

### å…§å®¹å“è³ª
- [ ] è³‡è¨Šæº–ç¢ºæ€§
- [ ] å®Œæ•´æ€§æª¢æŸ¥
- [ ] ç¯„ä¾‹ç¨‹å¼ç¢¼å¯åŸ·è¡Œ
- [ ] é€£çµæœ‰æ•ˆæ€§

### å¯ç”¨æ€§
- [ ] å°èˆªæ¸…æ™°
- [ ] æœå°‹åŠŸèƒ½å¯ç”¨
- [ ] è¡Œå‹•è£ç½®ç›¸å®¹
- [ ] ç„¡éšœç¤™è¨­è¨ˆ

### ç¶­è­·æ€§
- [ ] ç‰ˆæœ¬æ§åˆ¶
- [ ] è®Šæ›´è¨˜éŒ„
- [ ] è²¬ä»»æ­¸å±¬
- [ ] æ›´æ–°é »ç‡
````

---

é€™å€‹ä¸»é¡Œçš„æ ¸å¿ƒåœ¨æ–¼å»ºç«‹ä¸€å€‹ã€Œå…±åŒèªè¨€ã€ï¼Œè®“ä¸åŒèƒŒæ™¯çš„åœ˜éšŠæˆå“¡èƒ½å¤ é«˜æ•ˆå”ä½œã€‚æ¯ä¸€ä»½å…±ç”¨å¥‘ç´„ã€æ¯ä¸€å€‹ OpenAPI è¦æ ¼ã€æ¯ä¸€ç¯‡æŠ€è¡“æ–‡ä»¶ï¼Œéƒ½æ˜¯åœ˜éšŠæ™ºæ…§çš„çµæ™¶ï¼Œä¹Ÿæ˜¯æœªä¾†å”ä½œçš„åŸºçŸ³ã€‚ç•¶ä¸‹ä¸€å€‹æ–°æˆå“¡åŠ å…¥åœ˜éšŠæ™‚ï¼Œç•¶ä¸‹ä¸€å€‹åŠŸèƒ½éœ€è¦é–‹ç™¼æ™‚ï¼Œç•¶ä¸‹ä¸€æ¬¡ç³»çµ±é‡æ§‹ä¾†è‡¨æ™‚ï¼Œé€™äº›å”ä½œè¨­è¨ˆçš„æŠ•å…¥å°‡æœƒç”¢ç”Ÿè¤‡åˆ©æ•ˆæ‡‰ã€‚

é€™å°±æ˜¯è·¨åœ˜éšŠå”ä½œè¨­è¨ˆçš„çœŸæ­£åƒ¹å€¼ï¼š**ä¸æ˜¯è®“æˆ‘å€‘åšå¾—æ›´å¿«ï¼Œè€Œæ˜¯è®“æˆ‘å€‘åšå¾—æ›´å°ï¼›ä¸æ˜¯è®“å€‹äººæ›´å¼·ï¼Œè€Œæ˜¯è®“åœ˜éšŠæ›´å¼·ã€‚**

æœ€çµ‚ï¼Œæˆ‘å€‘å»ºç«‹çš„ä¸åƒ…æ˜¯æŠ€è¡“è¦ç¯„ï¼Œæ›´æ˜¯ä¸€ç¨®å”ä½œæ–‡åŒ–â€”â€”ä¸€ç¨®ä»¥å…±è­˜ç‚ºåŸºç¤ã€ä»¥æ¨™æº–ç‚ºæ©‹æ¨‘ã€ä»¥æ–‡ä»¶ç‚ºè¼‰é«”çš„é«˜æ•ˆå”ä½œæ–‡åŒ–ã€‚é€™ç¨®æ–‡åŒ–å°‡æˆç‚ºåœ˜éšŠæœ€å¯¶è²´çš„è³‡ç”¢ï¼Œæ”¯æ’è‘—æˆ‘å€‘åœ¨å¿«é€Ÿè®ŠåŒ–çš„æŠ€è¡“ç’°å¢ƒä¸­æŒçºŒå‰µé€ åƒ¹å€¼ã€‚
